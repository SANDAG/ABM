Label,Description,Expression,escort,shopping,eatout,othmaint,social,othdiscr
,,"_DIST@np.minimum(skims['DIST'], 20)",1,1,1,1,1,1
,,_DIST_SQUARED@_DIST**2,1,1,1,1,1,1
,,_DIST_CUBED@_DIST**3,1,1,1,1,1,1
,,_DIST_LOGGED@np.log(_DIST + 0.001),1,1,1,1,1,1
,,"_CALIB_DIST@np.where(df.tour_type == 'escort', 20, np.where(df.tour_type == 'othmaint', 8, 10))",1,1,1,1,1,1
Distance,Distance,@_DIST,coef_dist_escort,coef_dist_shopping,coef_dist_eatout,coef_dist_maint,coef_dist_social,coef_dist_discr
Distance_squared,Distance_squared,@_DIST_SQUARED,coef_distsqrd_escort,coef_distsqrd_shopping,coef_distsqrd_eatout,coef_distsqrd_maint,coef_distsqrd_social,coef_distsqrd_discr
Distance_cubed,Distance_cubed,@_DIST_CUBED,coef_zero,coef_distcubed_shopping,coef_distcubed_eatout,coef_zero,coef_distcubed_social,coef_distcubed_discr
Distance_logged,Distance_logged,@_DIST_LOGGED,coef_zero,coef_distlogged_shopping,coef_distlogged_eatout,coef_zero,coef_distlogged_social,coef_distlogged_discr
Distance_female,Distance_female,"@_DIST* df.female * np.where(df.get('tour_category', default=False) == 'joint', 0, 1)",coef_zero,coef_distfemale_shopping,coef_zero,coef_zero,coef_zero,coef_distfemale_disc
Distance - low income_segment_escort,Distance - low income_segment_escort,@_DIST * (df.income < 30000),coef_distlowinc_escort,coef_zero,coef_zero,coef_zero,coef_zero,coef_zero
Distance - low income_segment_maint,Distance - low income_segment_maint,@_DIST * (df.income_segment <= 2),coef_zero,coef_zero,coef_zero,coef_distlowinc_maint,coef_distlowinc_social,coef_zero
Distance - lowmed income_segment_maint,Distance - lowmed income_segment_maint,@_DIST * (df.income_segment <= 3),coef_zero,coef_zero,coef_zero,coef_zero,coef_distmidlowinc_social,coef_zero
#Distance - Time Pressure calculated as the log of the maxtime over tours left,#Distance - Time Pressure calculated as the log of the maxtime over tours left,@_DIST* np.log((person_max_window(persons)/(df.tour_type_count - df.tour_type_num + 1))+0.0001),coef_zero,coef_disttimepressure_shopping,coef_disttimepressure_eatout,coef_disttimepressure_maint,coef_zero,coef_disttimepressure_disc
#Accessibility,#Accessibility,@@nonMandatoryAccessibilityAlt,coef_zero,coef_accessibility_shopping,coef_zero,coef_zero,coef_zero,coef_zero
Distance - age 16 to 24,Distance - age 16 to 24,"@_DIST * df.age.between(16, 24) * np.where(df.get('tour_category', default=False) == 'joint', 0, 1)",coef_zero,coef_zero,coef_zero,coef_distage1624_maint,coef_zero,coef_zero
Distance - age 56 to 64,Distance - age 56 to 64,"@_DIST * (df.age.between(56, 64))",coef_distage5664_escort,coef_zero,coef_zero,coef_zero,coef_zero,coef_zero
Distance - age 65+,Distance - age 65+,@_DIST * (df.age > 64),coef_distage64plus_escort,coef_zero,coef_zero,coef_zero,coef_zero,coef_zero
#escort size is zero for escort tour,#escort size is zero for escort tour,@(@@householdsDestAlt * 1 + df.num_young_children * @@householdsDestAlt * 1 + df.num_gradeschool * @@gradeSchoolEnrollmentDestAlt * 100 + df.numHighSchoolStudents * @@highSchoolEnrollmentDestAlt * 100) == 0,-999,coef_zero,coef_zero,coef_zero,coef_zero,coef_zero
#escort size is non-zero for escort tour,#escort size is non-zero for escort tour,"@np.where(@@householdsDestAlt * 1 + df.num_young_children * @@householdsDestAlt * 1 + df.num_gradeschool * @@gradeSchoolEnrollmentDestAlt * 100 + df.numHighSchoolStudents * @@highSchoolEnrollmentDestAlt * 100 > 0, np.log(@@householdsDestAlt * 1 + df.num_y",1,coef_zero,coef_zero,coef_zero,coef_zero,coef_zero
Size variable,Size variable,@df['size_term'].apply(np.log1p),1,1,1,1,1,1
No attractions,No attractions,@df['size_term']==0,-999,-999,-999,-999,-999,-999
Mode choice logsum,Mode choice logsum,mode_choice_logsum,coef_mode_logsum,coef_mode_logsum,coef_mode_logsum,coef_mode_logsum,coef_mode_logsum_socdisc,coef_mode_logsum_socdisc
Sample of alternatives correction factor,Sample of alternatives correction factor,"@np.minimum(np.log(df.pick_count/df.prob), 60)",1,1,1,1,1,1
#Calibration constants,#Calibration constants,,,,,,,
Calibration - Distance,Calibration - Distance,"@np.minimum(_DIST, _CALIB_DIST)",coef_Calibration_Distance_escort,coef_Calibration_Distance_shopping,coef_Calibration_Distance_eatout,coef_Calibration_Distance_maint,coef_Calibration_Distance_social,coef_Calibration_Distance_disc
Calibration - Distance_squared,Calibration - Distance_squared,"@np.minimum(_DIST_SQUARED, _CALIB_DIST**2)",coef_Calibration_Distance_squared_escort,coef_Calibration_Distance_squared_shopping,coef_Calibration_Distance_squared_eatout,coef_Calibration_Distance_squared_maint,coef_Calibration_Distance_squared_social,coef_Calibration_Distance_squared_disc
Calibration - Distance_cubed,Calibration - Distance_cubed,"@np.minimum(_DIST_CUBED, _CALIB_DIST**3)",coef_Calibration_Distance_cubed_escort,coef_Calibration_Distance_cubed_shopping,coef_Calibration_Distance_cubed_eatout,coef_Calibration_Distance_cubed_maint,coef_Calibration_Distance_cubed_social,coef_Calibration_Distance_cubed_disc
Calibration - Distance_logged,Calibration - Distance_logged,"@np.minimum(_DIST_LOGGED, np.log(_CALIB_DIST))",coef_Calibration_Distance_logged_escort,coef_Calibration_Distance_logged_shopping,coef_Calibration_Distance_logged_eatout,coef_Calibration_Distance_logged_maint,coef_Calibration_Distance_logged_social,coef_Calibration_Distance_logged_disc
Calibration - 0-1 miles,Calibration - 0-1 miles,@(_DIST<1),,coef_Calibration_0_1_miles_shopping,coef_Calibration_0_1_miles_eatout,coef_Calibration_0_1_miles_maint,coef_Calibration_0_1_miles_social,
Calibration - 1-2 miles,Calibration - 1-2 miles,@(_DIST>=1) * (_DIST<2),,coef_Calibration_1_2_miles_shopping,,coef_Calibration_1_2_miles_maint,coef_Calibration_1_2_miles_social,
Calibration - 2-5 miles,Calibration - 2-5 miles,@(_DIST>=2) * (_DIST<5),,coef_Calibration_2_5_miles_shopping,,coef_Calibration_2_5_miles_maint,,
ABM2 calibration - 0-5 miles,ABM2 calibration - 0-5 miles,@(_DIST < 5) * _DIST,,,coef_ABM2_calibration_0_5_miles_eatout,,coef_ABM2_calibration_0_5_miles_social,coef_ABM2_calibration_0_5_miles_disc
"ABM2 calibration - 0-1 miles, indiv tour","ABM2 calibration - 0-1 miles, all tours",@(_DIST < 1),,,coef_ABM2_calibration_0_1_miles_eatout,,coef_ABM2_calibration_0_1_miles_social,coef_ABM2_calibration_0_1_miles_disc
"ABM2 calibration - 1-2 miles, indiv tour","ABM2 calibration - 1-2 miles, all tours",@(_DIST < 2) * (_DIST >= 1),,,coef_ABM2_calibration_1_2_miles_eatout,,coef_ABM2_calibration_1_2_miles_social,coef_ABM2_calibration_1_2_miles_disc
"ABM2 calibration - 2-3 miles, indiv tour","ABM2 calibration - 2-3 miles, all tours",@(_DIST < 3) * (_DIST >= 2),,,,,coef_ABM2_calibration_2_3_miles_social,coef_ABM2_calibration_2_3_miles_disc
"ABM2 calibration - 3-4 miles, all tours","ABM2 calibration - 3-4 miles, all tours",@(_DIST < 4) * (_DIST >= 3),,,,,coef_ABM2_calibration_3_4_miles_social,coef_ABM2_calibration_3_4_miles_disc
"ABM2 calibration - 0-1 miles, indiv tour","ABM2 calibration - 0-1 miles, indiv tour","@(_DIST < 1) * np.where(df.get('tour_category', default=False) == 'joint', 0, 1)",coef_ABM2_calibration_0_1_miles_escort,,,,,
"ABM2 calibration - 1-2 miles, indiv tour","ABM2 calibration - 1-2 miles, indiv tour","@(_DIST < 2) * (_DIST >= 1) * np.where(df.get('tour_category', default=False) == 'joint', 0, 1)",coef_ABM2_calibration_1_2_miles_escort,,,coef_ABM2_calibration_1_2_miles_maint,,
"ABM2 calibration - 2-3 miles, indiv tour","ABM2 calibration - 2-3 miles, indiv tour","@(_DIST < 3) * (_DIST >= 2) * np.where(df.get('tour_category', default=False) == 'joint', 0, 1)",coef_ABM2_calibration_2_3_miles_escort,,,coef_ABM2_calibration_2_3_miles_maint,,
ABM2 calibration - distance logged,"ABM2 calibration - distance logged, indiv tour","@np.minimum(_DIST_LOGGED, np.log(_CALIB_DIST)) * np.where(df.get('tour_category', default=False) == 'joint', 0, 1)",,,,coef_ABM2_calibration_distance_logged_maint,,
ABM2 calibration - 4-5 miles,ABM2 calibration - 4-5 miles,@(_DIST < 5) * (_DIST >= 4),,coef_ABM2_calibration_4_5_miles_shopping,coef_ABM2_calibration_4_5_miles_eatout,coef_ABM2_calibration_4_5_miles_maint,coef_ABM2_calibration_4_5_miles_social,coef_ABM2_calibration_4_5_miles_disc
ABM2 calibration - 5-6 miles,ABM2 calibration - 5-6 miles,@(_DIST < 6) * (_DIST >= 5),,coef_ABM2_calibration_5_6_miles_shopping,,coef_ABM2_calibration_5_6_miles_maint,,
ABM2 calibration - 6-7 miles,ABM2 calibration - 6-7 miles,@(_DIST < 7) * (_DIST >= 6),,coef_ABM2_calibration_6_7_miles_shopping,,coef_ABM2_calibration_6_7_miles_maint,,
ABM2 calibration - 0-20 miles,ABM2 calibration - 0-20 miles,@(_DIST < 20) * _DIST,coef_ABM2_calibration_0_20_miles_escort,coef_ABM2_calibration_0_20_miles_shopping,,coef_ABM2_calibration_0_20_miles_maint,,
ABM2 calibration - distance,ABM2 calibration - distance,@_DIST,coef_ABM2_calibration_distance_escort,coef_ABM2_calibration_distance_shopping,coef_ABM2_calibration_distance_eatout,coef_ABM2_calibration_distance_maint,coef_ABM2_calibration_distance_social,coef_ABM2_calibration_distance_disc
ABM2 calibration - distance squared,ABM2 calibration - distance squared,@_DIST_SQUARED,coef_ABM2_calibration_distance_squared_escort,coef_ABM2_calibration_distance_squared_shopping,coef_ABM2_calibration_distance_squared_eatout,coef_ABM2_calibration_distance_squared_maint,coef_ABM2_calibration_distance_squared_social,coef_ABM2_calibration_distance_squared_disc
ABM2 calibration - distance cubed,ABM2 calibration - distance cubed,@_DIST_CUBED,coef_ABM2_calibration_distance_cubed_escort,coef_ABM2_calibration_distance_cubed_shopping,coef_ABM2_calibration_distance_cubed_eatout,coef_ABM2_calibration_distance_cubed_maint,coef_ABM2_calibration_distance_cubed_social,coef_ABM2_calibration_distance_cubed_disc
ABM2 calibration - distance logged,ABM2 calibration - distance logged,"@np.minimum(_DIST_LOGGED, np.log(_CALIB_DIST)) ",coef_ABM2_calibration_distance_logged_escort,coef_ABM2_calibration_distance_logged_shopping,coef_ABM2_calibration_distance_logged_eatout,,coef_ABM2_calibration_distance_logged_social,coef_ABM2_calibration_distance_logged_disc
"ABM2 calibration - 0-1 miles, joint tour","ABM2 calibration - 0-1 miles, joint tour","@np.where(df.get('tour_category', default=False) == 'joint', 1, 0) * (_DIST<1)",,coef_ABM2_calibration_0_1_miles_joint_shopping,coef_ABM2_calibration_0_1_miles_joint_eatout,coef_ABM2_calibration_0_1_miles_joint_maint,coef_ABM2_calibration_0_1_miles_joint_social,coef_ABM2_calibration_0_1_miles_joint_disc
"ABM2 calibration - 1-2 miles, joint tour","ABM2 calibration - 1-2 miles, joint tour","@np.where(df.get('tour_category', default=False) == 'joint', 1, 0) * (_DIST>=1) * (_DIST<2)",,coef_ABM2_calibration_1_2_miles_joint_shopping,coef_ABM2_calibration_1_2_miles_joint_eatout,coef_ABM2_calibration_1_2_miles_joint_maint,coef_ABM2_calibration_1_2_miles_joint_social,coef_ABM2_calibration_1_2_miles_joint_disc
"ABM2 calibration - 2-3 miles, joint tour","ABM2 calibration - 2-3 miles, joint tour","@np.where(df.get('tour_category', default=False) == 'joint', 1, 0) * (_DIST>=2) * (_DIST<3)",,coef_ABM2_calibration_2_3_miles_joint_shopping,,coef_ABM2_calibration_2_3_miles_joint_maint,,
"ABM2 calibration - 1-2 miles, indiv tour","ABM2 calibration - 1-2 miles, indiv tour","@(_DIST < 2) * (_DIST >= 1) * np.where(df.get('tour_category', default=False) == 'joint', 0, 1)",,coef_ABM2_calibration_1_2_miles_shopping,,,,
"ABM2 calibration - 2-3 miles, indiv tour","ABM2 calibration - 2-3 miles, indiv tour","@(_DIST < 3) * (_DIST >= 2) * np.where(df.get('tour_category', default=False) == 'joint', 0, 1)",,coef_ABM2_calibration_2_3_miles_shopping,,,,
ABM2+ calibration - distance logged,ABM2+ calibration - distance logged,"@(_DIST < 20) * np.minimum(_DIST_LOGGED, np.log(_CALIB_DIST))",coef_ABM2p_calibration_distance_logged_escort,,,,,
ABM2+ calibration - 0-1 miles,ABM2+ calibration - 0-1 miles,@(_DIST < 1),coef_ABM2p_calibration_0_1_miles_escort,coef_ABM2p_calibration_0_1_miles_shopping,coef_ABM2p_calibration_0_1_miles_eatout,coef_ABM2p_calibration_0_1_miles_maint,coef_ABM2p_calibration_0_1_miles_social,coef_ABM2p_calibration_0_1_miles_disc
ABM2+ calibration - 1-2 miles,ABM2+ calibration - 1-2 miles,@(_DIST < 2) * (_DIST >= 1),coef_ABM2p_calibration_1_2_miles_escort,coef_ABM2p_calibration_1_2_miles_shopping,coef_ABM2p_calibration_1_2_miles_eatout,coef_ABM2p_calibration_1_2_miles_maint,coef_ABM2p_calibration_1_2_miles_social,coef_ABM2p_calibration_1_2_miles_disc
ABM2+ calibration - 2-3 miles,ABM2+ calibration - 2-3 miles,@(_DIST < 3) * (_DIST >= 2),coef_ABM2p_calibration_2_3_miles_escort,coef_ABM2p_calibration_2_3_miles_shopping,coef_ABM2p_calibration_2_3_miles_eatout,coef_ABM2p_calibration_2_3_miles_maint,coef_ABM2p_calibration_2_3_miles_social,coef_ABM2p_calibration_2_3_miles_disc
ABM2+ calibration - 3-4 miles,ABM2+ calibration - 3-4 miles,@(_DIST < 4) * (_DIST >= 3),coef_ABM2p_calibration_3_4_miles_escort,coef_ABM2p_calibration_3_4_miles_shopping,coef_ABM2p_calibration_3_4_miles_eatout,coef_ABM2p_calibration_3_4_miles_maint,coef_ABM2p_calibration_3_4_miles_social,coef_ABM2p_calibration_3_4_miles_disc
#,#,,,,,,,
#Mission Valley Mall Constant,#Mission Valley Mall Constant,@df.destination==6187,,coef_Mission_Valley_Mall_Constant_shopping_6187,,,,
#Mission Valley Mall Constant,#Mission Valley Mall Constant,@df.destination==6196,,coef_Mission_Valley_Mall_Constant_shopping_6196,,,,
#,#,,,,,,,
