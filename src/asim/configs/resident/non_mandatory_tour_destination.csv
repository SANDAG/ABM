Label,Description,Expression,escort,shopping,eatout,othmaint,social,othdiscr
,,"_DIST@np.minimum(skims['DIST'], 20)",1,1,1,1,1,1
,,_DIST_SQUARED@_DIST**2,1,1,1,1,1,1
,,_DIST_CUBED@_DIST**3,1,1,1,1,1,1
,,_DIST_LOGGED@np.log(_DIST + 0.001),1,1,1,1,1,1
,,"_CALIB_DIST@np.where(df.tour_type == 'escort', 20, np.where(df.tour_type == 'othmaint', 8, 10))",1,1,1,1,1,1
util_dist,dist,@_DIST,coef_dist_escort,coef_dist_shopping,coef_dist_eatout,coef_dist_maint,coef_dist_social,coef_dist_discr
util_dist_squared,dist_squared,@_DIST_SQUARED,coef_distsqrd_escort,coef_distsqrd_shopping,coef_distsqrd_eatout,coef_distsqrd_maint,coef_distsqrd_social,coef_distsqrd_discr
util_dist_cubed,dist_cubed,@_DIST_CUBED,coef_zero,coef_distcubed_shopping,coef_distcubed_eatout,coef_zero,coef_distcubed_social,coef_distcubed_discr
util_dist_logged,dist_logged,@_DIST_LOGGED,coef_zero,coef_distlogged_shopping,coef_distlogged_eatout,coef_zero,coef_distlogged_social,coef_distlogged_discr
util_dist_female,dist_female,"@_DIST* df.female * np.where(df.get('tour_category', default=False) == 'joint', 0, 1)",coef_zero,coef_distfemale_shopping,coef_zero,coef_zero,coef_zero,coef_distfemale_disc
util_dist_income_segment_escort,Distance - low income_segment_escort,@_DIST * (df.income < 30000),coef_distlowinc_escort,coef_zero,coef_zero,coef_zero,coef_zero,coef_zero
util_dist_lowincome_segment_maint,Distance - low income_segment_maint,@_DIST * (df.income_segment <= 2),coef_zero,coef_zero,coef_zero,coef_distlowinc_maint,coef_distlowinc_social,coef_zero
util_dist_lowmed_income_segment_maint,Distance - lowmed income_segment_maint,@_DIST * (df.income_segment <= 3),coef_zero,coef_zero,coef_zero,coef_zero,coef_distmidlowinc_social,coef_zero
#Distance - Time Pressure calculated as the log of the maxtime over tours left,#Distance - Time Pressure calculated as the log of the maxtime over tours left,@_DIST* np.log((person_max_window(persons)/(df.tour_type_count - df.tour_type_num + 1))+0.0001),coef_zero,coef_disttimepressure_shopping,coef_disttimepressure_eatout,coef_disttimepressure_maint,coef_zero,coef_disttimepressure_disc
Accessibility,#Accessibility,shopping_accessibility,coef_zero,coef_accessibility_shopping,coef_zero,coef_zero,coef_zero,coef_zero
util_dist_age_16to24,Distance - age 16 to 24,"@_DIST * df.age.between(16, 24) * np.where(df.get('tour_category', default=False) == 'joint', 0, 1)",coef_zero,coef_zero,coef_zero,coef_distage1624_maint,coef_zero,coef_zero
util_dist_age_56to64,Distance - age 56 to 64,"@_DIST * (df.age.between(56, 64))",coef_distage5664_escort,coef_zero,coef_zero,coef_zero,coef_zero,coef_zero
util_dist_age_65+,Distance - age 65+,@_DIST * (df.age > 64),coef_distage64plus_escort,coef_zero,coef_zero,coef_zero,coef_zero,coef_zero
#escort size is zero for escort tour,#escort size is zero for escort tour,@(@@householdsDestAlt * 1 + df.num_young_children * @@householdsDestAlt * 1 + df.num_gradeschool * @@gradeSchoolEnrollmentDestAlt * 100 + df.numHighSchoolStudents * @@highSchoolEnrollmentDestAlt * 100) == 0,-999,coef_zero,coef_zero,coef_zero,coef_zero,coef_zero
#escort size is non-zero for escort tour,#escort size is non-zero for escort tour,"@np.where(@@householdsDestAlt * 1 + df.num_young_children * @@householdsDestAlt * 1 + df.num_gradeschool * @@gradeSchoolEnrollmentDestAlt * 100 + df.numHighSchoolStudents * @@highSchoolEnrollmentDestAlt * 100 > 0, np.log(@@householdsDestAlt * 1 + df.num_y",1,coef_zero,coef_zero,coef_zero,coef_zero,coef_zero
util_size_term,Size variable,@df['size_term'].apply(np.log1p),1,1,1,1,1,1
util_no_attractions,No attractions,@df['size_term']==0,-999,-999,-999,-999,-999,-999
util_mode_choice_logsum,Mode choice logsum,mode_choice_logsum,coef_mode_logsum,coef_mode_logsum,coef_mode_logsum,coef_mode_logsum,coef_mode_logsum_socdisc,coef_mode_logsum_socdisc
util_sample_alts_correction,Sample of alternatives correction factor,"@np.minimum(np.log(df.pick_count/df.prob), 60)",1,1,1,1,1,1
#Calibration constants,#Calibration constants,,,,,,,
util_calib_dist,Calibration - Distance,"@np.minimum(_DIST, _CALIB_DIST)",coef_Calibration_Distance_escort,coef_Calibration_Distance_shopping,coef_Calibration_Distance_eatout,coef_Calibration_Distance_maint,coef_Calibration_Distance_social,coef_Calibration_Distance_disc
util_calib_dist_squared,Calibration - Distance_squared,"@np.minimum(_DIST_SQUARED, _CALIB_DIST**2)",coef_Calibration_Distance_squared_escort,coef_Calibration_Distance_squared_shopping,coef_Calibration_Distance_squared_eatout,coef_Calibration_Distance_squared_maint,coef_Calibration_Distance_squared_social,coef_Calibration_Distance_squared_disc
util_calib_dist_cubed,Calibration - Distance_cubed,"@np.minimum(_DIST_CUBED, _CALIB_DIST**3)",coef_Calibration_Distance_cubed_escort,coef_Calibration_Distance_cubed_shopping,coef_Calibration_Distance_cubed_eatout,coef_Calibration_Distance_cubed_maint,coef_Calibration_Distance_cubed_social,coef_Calibration_Distance_cubed_disc
util_calib_dist_logged,Calibration - Distance_logged,"@np.minimum(_DIST_LOGGED, np.log(_CALIB_DIST))",coef_Calibration_Distance_logged_escort,coef_Calibration_Distance_logged_shopping,coef_Calibration_Distance_logged_eatout,coef_Calibration_Distance_logged_maint,coef_Calibration_Distance_logged_social,coef_Calibration_Distance_logged_disc
util_calib_0_1_miles,Calibration - 0-1 miles,@(_DIST<1),,coef_Calibration_0_1_miles_shopping,coef_Calibration_0_1_miles_eatout,coef_Calibration_0_1_miles_maint,coef_Calibration_0_1_miles_social,
util_calib_1_2_miles,Calibration - 1-2 miles,@(_DIST>=1) * (_DIST<2),,coef_Calibration_1_2_miles_shopping,,coef_Calibration_1_2_miles_maint,coef_Calibration_1_2_miles_social,
util_calib_2_5_miles,Calibration - 2-5 miles,@(_DIST>=2) * (_DIST<5),,coef_Calibration_2_5_miles_shopping,,coef_Calibration_2_5_miles_maint,,
util_abm2_calib_0_5_miles,ABM2 calibration - 0-5 miles,@(_DIST < 5) * _DIST,,,coef_ABM2_calibration_0_5_miles_eatout,,coef_ABM2_calibration_0_5_miles_social,coef_ABM2_calibration_0_5_miles_disc
util_abm2_calib_0to1_miles_all,"ABM2 calibration - 0-1 miles, all tours",@(_DIST < 1),,,coef_ABM2_calibration_0_1_miles_eatout,,coef_ABM2_calibration_0_1_miles_social,coef_ABM2_calibration_0_1_miles_disc
util_abm2_calib_1to2_miles_all,"ABM2 calibration - 1-2 miles, all tours",@(_DIST < 2) * (_DIST >= 1),,,coef_ABM2_calibration_1_2_miles_eatout,,coef_ABM2_calibration_1_2_miles_social,coef_ABM2_calibration_1_2_miles_disc
util_abm2_calib_2to3_miles_all,"ABM2 calibration - 2-3 miles, all tours",@(_DIST < 3) * (_DIST >= 2),,,,,coef_ABM2_calibration_2_3_miles_social,coef_ABM2_calibration_2_3_miles_disc
util_abm2_calib_3to4_miles_all,"ABM2 calibration - 3-4 miles, all tours",@(_DIST < 4) * (_DIST >= 3),,,,,coef_ABM2_calibration_3_4_miles_social,coef_ABM2_calibration_3_4_miles_disc
util_abm2_calib_0to1_miles_joint,"ABM2 calibration - 0-1 miles, joint tour","@(_DIST < 1) * np.where(df.get('tour_category', default=False) == 'joint', 0, 1)",coef_ABM2_calibration_0_1_miles_escort,,,,,
util_abm2_calib_1to2_miles_joint,"ABM2 calibration - 1-2 miles, joint tour","@(_DIST < 2) * (_DIST >= 1) * np.where(df.get('tour_category', default=False) == 'joint', 0, 1)",coef_ABM2_calibration_1_2_miles_escort,,,coef_ABM2_calibration_1_2_miles_maint,,
util_abm2_calib_2to3_miles_joint,"ABM2 calibration - 2-3 miles, joint tour","@(_DIST < 3) * (_DIST >= 2) * np.where(df.get('tour_category', default=False) == 'joint', 0, 1)",coef_ABM2_calibration_2_3_miles_escort,,,coef_ABM2_calibration_2_3_miles_maint,,
util_abm2_calib_distance_logged,"ABM2 calibration - distance logged, indiv tour","@np.minimum(_DIST_LOGGED, np.log(_CALIB_DIST)) * np.where(df.get('tour_category', default=False) == 'joint', 0, 1)",,,,coef_ABM2_calibration_distance_logged_maint,,
util_abm2_calib_4to5_miles,ABM2 calibration - 4-5 miles,@(_DIST < 5) * (_DIST >= 4),,coef_ABM2_calibration_4_5_miles_shopping,coef_ABM2_calibration_4_5_miles_eatout,coef_ABM2_calibration_4_5_miles_maint,coef_ABM2_calibration_4_5_miles_social,coef_ABM2_calibration_4_5_miles_disc
util_abm2_calib_5to6_miles,ABM2 calibration - 5-6 miles,@(_DIST < 6) * (_DIST >= 5),,coef_ABM2_calibration_5_6_miles_shopping,,coef_ABM2_calibration_5_6_miles_maint,,
util_abm2_calib_6to7_miles,ABM2 calibration - 6-7 miles,@(_DIST < 7) * (_DIST >= 6),,coef_ABM2_calibration_6_7_miles_shopping,,coef_ABM2_calibration_6_7_miles_maint,,
util_abm2_calib_0to20_miles,ABM2 calibration - 0-20 miles,@(_DIST < 20) * _DIST,coef_ABM2_calibration_0_20_miles_escort,coef_ABM2_calibration_0_20_miles_shopping,,coef_ABM2_calibration_0_20_miles_maint,,
util_abm2_calib_distance,ABM2 calibration - distance,@_DIST,coef_ABM2_calibration_distance_escort,coef_ABM2_calibration_distance_shopping,coef_ABM2_calibration_distance_eatout,coef_ABM2_calibration_distance_maint,coef_ABM2_calibration_distance_social,coef_ABM2_calibration_distance_disc
util_abm2_calib_distance_squared,ABM2 calibration - distance squared,@_DIST_SQUARED,coef_ABM2_calibration_distance_squared_escort,coef_ABM2_calibration_distance_squared_shopping,coef_ABM2_calibration_distance_squared_eatout,coef_ABM2_calibration_distance_squared_maint,coef_ABM2_calibration_distance_squared_social,coef_ABM2_calibration_distance_squared_disc
util_abm2_calib_distance_cubed,ABM2 calibration - distance cubed,@_DIST_CUBED,coef_ABM2_calibration_distance_cubed_escort,coef_ABM2_calibration_distance_cubed_shopping,coef_ABM2_calibration_distance_cubed_eatout,coef_ABM2_calibration_distance_cubed_maint,coef_ABM2_calibration_distance_cubed_social,coef_ABM2_calibration_distance_cubed_disc
util_abm2_calib_distance_logged2,ABM2 calibration - distance logged,"@np.minimum(_DIST_LOGGED, np.log(_CALIB_DIST)) ",coef_ABM2_calibration_distance_logged_escort,coef_ABM2_calibration_distance_logged_shopping,coef_ABM2_calibration_distance_logged_eatout,,coef_ABM2_calibration_distance_logged_social,coef_ABM2_calibration_distance_logged_disc
"util_abm2_calib_0to1_miles_joint_tour""","ABM2 calibration - 0-1 miles, joint tour","@np.where(df.get('tour_category', default=False) == 'joint', 1, 0) * (_DIST<1)",,coef_ABM2_calibration_0_1_miles_joint_shopping,coef_ABM2_calibration_0_1_miles_joint_eatout,coef_ABM2_calibration_0_1_miles_joint_maint,coef_ABM2_calibration_0_1_miles_joint_social,coef_ABM2_calibration_0_1_miles_joint_disc
"util_abm2_calib_1to2_miles_joint_tour""","ABM2 calibration - 1-2 miles, joint tour","@np.where(df.get('tour_category', default=False) == 'joint', 1, 0) * (_DIST>=1) * (_DIST<2)",,coef_ABM2_calibration_1_2_miles_joint_shopping,coef_ABM2_calibration_1_2_miles_joint_eatout,coef_ABM2_calibration_1_2_miles_joint_maint,coef_ABM2_calibration_1_2_miles_joint_social,coef_ABM2_calibration_1_2_miles_joint_disc
"util_abm2_calib_2to3_miles_joint_tour""","ABM2 calibration - 2-3 miles, joint tour","@np.where(df.get('tour_category', default=False) == 'joint', 1, 0) * (_DIST>=2) * (_DIST<3)",,coef_ABM2_calibration_2_3_miles_joint_shopping,,coef_ABM2_calibration_2_3_miles_joint_maint,,
"util_abm2_calib_1to2_miles_indiv_tour""","ABM2 calibration - 1-2 miles, indiv tour","@(_DIST < 2) * (_DIST >= 1) * np.where(df.get('tour_category', default=False) == 'joint', 0, 1)",,coef_ABM2_calibration_1_2_miles_shopping,,,,
"util_abm2_calib_2to3_miles_indiv_tour""","ABM2 calibration - 2-3 miles, indiv tour","@(_DIST < 3) * (_DIST >= 2) * np.where(df.get('tour_category', default=False) == 'joint', 0, 1)",,coef_ABM2_calibration_2_3_miles_shopping,,,,
util_abm2_calib_distance_logged3,ABM2+ calibration - distance logged,"@(_DIST < 20) * np.minimum(_DIST_LOGGED, np.log(_CALIB_DIST))",coef_ABM2p_calibration_distance_logged_escort,,,,,
util_abm2_calib_0to1_miles,ABM2+ calibration - 0-1 miles,@(_DIST < 1),coef_ABM2p_calibration_0_1_miles_escort,coef_ABM2p_calibration_0_1_miles_shopping,coef_ABM2p_calibration_0_1_miles_eatout,coef_ABM2p_calibration_0_1_miles_maint,coef_ABM2p_calibration_0_1_miles_social,coef_ABM2p_calibration_0_1_miles_disc
util_abm2_calib_1to2_miles,ABM2+ calibration - 1-2 miles,@(_DIST < 2) * (_DIST >= 1),coef_ABM2p_calibration_1_2_miles_escort,coef_ABM2p_calibration_1_2_miles_shopping,coef_ABM2p_calibration_1_2_miles_eatout,coef_ABM2p_calibration_1_2_miles_maint,coef_ABM2p_calibration_1_2_miles_social,coef_ABM2p_calibration_1_2_miles_disc
util_abm2_calib_2to3_miles,ABM2+ calibration - 2-3 miles,@(_DIST < 3) * (_DIST >= 2),coef_ABM2p_calibration_2_3_miles_escort,coef_ABM2p_calibration_2_3_miles_shopping,coef_ABM2p_calibration_2_3_miles_eatout,coef_ABM2p_calibration_2_3_miles_maint,coef_ABM2p_calibration_2_3_miles_social,coef_ABM2p_calibration_2_3_miles_disc
util_abm2_calib_3to4_miles,ABM2+ calibration - 3-4 miles,@(_DIST < 4) * (_DIST >= 3),coef_ABM2p_calibration_3_4_miles_escort,coef_ABM2p_calibration_3_4_miles_shopping,coef_ABM2p_calibration_3_4_miles_eatout,coef_ABM2p_calibration_3_4_miles_maint,coef_ABM2p_calibration_3_4_miles_social,coef_ABM2p_calibration_3_4_miles_disc
#,#,,,,,,,
#util_mission_valley_mall_constant,#Mission Valley Mall Constant,@df.destination==6187,,coef_Mission_Valley_Mall_Constant_shopping_6187,,,,
#util_mission_valley_mall_constant,#Mission Valley Mall Constant,@df.destination==6196,,coef_Mission_Valley_Mall_Constant_shopping_6196,,,,
#,#,,,,,,,
util_indiv_0_2_ASC,indiv tours in 0_2bin calibration constant,"@(_DIST.between(0,2)) * (df.get('tour_category', default=False) != 'joint')",coef_abm3_dist_0_2indivescort_asc,coef_abm3_dist_0_2indivmaint_asc,coef_abm3_dist_0_2indivdisc_asc,coef_abm3_dist_0_2indivmaint_asc,coef_abm3_dist_0_2indivdisc_asc,coef_abm3_dist_0_2indivdisc_asc
util_indiv_2_5_ASC,indiv tours in 2_5bin calibration constant,"@(_DIST.between(2,5)) * (df.get('tour_category', default=False) != 'joint')",coef_abm3_dist_2_5indivescort_asc,coef_abm3_dist_2_5indivmaint_asc,coef_abm3_dist_2_5indivdisc_asc,coef_abm3_dist_2_5indivmaint_asc,coef_abm3_dist_2_5indivdisc_asc,coef_abm3_dist_2_5indivdisc_asc
util_indiv_5_10_ASC,indiv tours in 5_10bin calibration constant,"@(_DIST.between(5,10)) * (df.get('tour_category', default=False) != 'joint')",coef_abm3_dist_5_10indivescort_asc,coef_abm3_dist_5_10indivmaint_asc,coef_abm3_dist_5_10indivdisc_asc,coef_abm3_dist_5_10indivmaint_asc,coef_abm3_dist_5_10indivdisc_asc,coef_abm3_dist_5_10indivdisc_asc
util_indiv_10_30_ASC,indiv tours in 10_30bin calibration constant,"@(_DIST.between(10,30)) * (df.get('tour_category', default=False) != 'joint')",coef_abm3_dist_10_30indivescort_asc,coef_abm3_dist_10_30indivmaint_asc,coef_abm3_dist_10_30indivdisc_asc,coef_abm3_dist_10_30indivmaint_asc,coef_abm3_dist_10_30indivdisc_asc,coef_abm3_dist_10_30indivdisc_asc
util_indiv_dist_ASC,indiv tours in distance calibration constant,"@(_DIST) * (df.get('tour_category', default=False) != 'joint')",,0.05,,0.05,,
util_joint_0_2_ASC,joint tours in 0_2bin calibration constant,"@(_DIST.between(0,2)) * (df.get('tour_category', default=False) == 'joint')",,coef_abm3_dist_0_2jointmaint_asc,coef_abm3_dist_0_2jointdisc_asc,coef_abm3_dist_0_2jointmaint_asc,coef_abm3_dist_0_2jointdisc_asc,coef_abm3_dist_0_2jointdisc_asc
util_joint_2_5_ASC,joint tours in 2_5bin calibration constant,"@(_DIST.between(2,5)) * (df.get('tour_category', default=False) == 'joint')",,coef_abm3_dist_2_5jointmaint_asc,coef_abm3_dist_2_5jointdisc_asc,coef_abm3_dist_2_5jointmaint_asc,coef_abm3_dist_2_5jointdisc_asc,coef_abm3_dist_2_5jointdisc_asc
util_joint_5_10_ASC,joint tours in 5_10bin calibration constant,"@(_DIST.between(5,10)) * (df.get('tour_category', default=False) == 'joint')",,coef_abm3_dist_5_10jointmaint_asc,coef_abm3_dist_5_10jointdisc_asc,coef_abm3_dist_5_10jointmaint_asc,coef_abm3_dist_5_10jointdisc_asc,coef_abm3_dist_5_10jointdisc_asc
util_joint_10_30_ASC,joint tours in 10_30bin calibration constant,"@(_DIST.between(10,30)) * (df.get('tour_category', default=False) == 'joint')",,coef_abm3_dist_10_30jointmaint_asc,coef_abm3_dist_10_30jointdisc_asc,coef_abm3_dist_10_30jointmaint_asc,coef_abm3_dist_10_30jointdisc_asc,coef_abm3_dist_10_30jointdisc_asc
util_indiv_dist_ASC,indiv tours in distance calibration constant,"@(_DIST) * (df.get('tour_category', default=False) == 'joint')",,0.10,,0.10,,