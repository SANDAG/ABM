Description,Target,Expression
# add additional fields,,
,tour_participants,trips.tour_id.map(tours.number_of_participants)
,_is_joint,(tour_participants > 1)
,distance,od_skims['DIST']
,_sample_rate,trips.household_id.map(households.sample_rate)
,weightTrip,"np.where(trips.trip_mode == 'SHARED2', tour_participants/OCC_SHARED2, np.where(trips.trip_mode == 'SHARED3',tour_participants/OCC_SHARED3, np.where(trips.trip_mode == 'TAXI', tour_participants/OCC_TAXI,  np.where(trips.trip_mode == 'TNC_SINGLE', tour_participants/OCC_TNC_SINGLE, np.where(trips.trip_mode == 'TNC_SHARED', tour_participants/OCC_TNC_SHARED, np.where(trips.trip_mode.isin(['WALK','BIKE','EBIKE','ESCOOTER']), tour_participants, 1))))))/_sample_rate"
,weightPersonTrip,tour_participants/_sample_rate
# code time periods,,
,is_ea,"trips.depart.between(time_periods['EA']['first_hour'], time_periods['EA']['last_hour'])"
,is_am,"trips.depart.between(time_periods['AM']['first_hour'], time_periods['AM']['last_hour'])"
,is_md,"trips.depart.between(time_periods['MD']['first_hour'], time_periods['MD']['last_hour'])"
,is_pm,"trips.depart.between(time_periods['PM']['first_hour'], time_periods['PM']['last_hour'])"
,is_ev,"trips.depart.between(time_periods['EV']['first_hour'], time_periods['EV']['last_hour'])"
,ownTrp,trips.ownsTransponder ==1
,_vot_bin_da,"np.where(trips.trip_mode.isin(['DRIVEALONE']),np.where(trips.vot_da < vot_threshold_low, 1,np.where(trips.vot_da < vot_threshold_med, 2, 3)),0)"
,_vot_bin_s2,"np.where(trips.trip_mode.isin(['SHARED2','TAXI','TNC_SINGLE']),np.where(trips.vot_s2 < vot_threshold_low,1,np.where(trips.vot_s2 < vot_threshold_med, 2, 3)),0)"
,_vot_bin_s3,"np.where(trips.trip_mode.isin(['SHARED3','TNC_SHARED']),np.where(trips.vot_s3 < vot_threshold_low,1,np.where(trips.vot_s3 < vot_threshold_med, 2, 3)),0)"
,vot1,"np.where((_vot_bin_da == 1) |( _vot_bin_s2 == 1) |( _vot_bin_s3 ==1),1,0)"
,vot2,"np.where((_vot_bin_da == 2 )|( _vot_bin_s2 == 2) |( _vot_bin_s3 ==2),1,0)"
,vot3,"np.where((_vot_bin_da == 3) | (_vot_bin_s2 == 3) | (_vot_bin_s3 ==3),1,0)"
,outbound,trips.outbound
,inbound,~trips.outbound
# ea trips,,
,DRIVEALONE_NOTR_EA_LOW,((trips.trip_mode == 'DRIVEALONE') & is_ea & ~ownTrp & vot1) * tour_participants
,SHARED2_NOTR_EA_LOW,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_ea * ~ownTrp * vot1 * tour_participants
,SHARED3_NOTR_EA_LOW,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_ea * ~ownTrp * vot1 * tour_participants
,DRIVEALONE_TR_EA_LOW,((trips.trip_mode == 'DRIVEALONE') & is_ea & ownTrp & vot1) * tour_participants
,SHARED2_TR_EA_LOW,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_ea * ownTrp * vot1 * tour_participants
,SHARED3_TR_EA_LOW,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_ea * ownTrp * vot1 * tour_participants
,DRIVEALONE_NOTR_EA_MED,((trips.trip_mode == 'DRIVEALONE') & is_ea & ~ownTrp & vot2) * tour_participants
,SHARED2_NOTR_EA_MED,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_ea * ~ownTrp * vot2 * tour_participants
,SHARED3_NOTR_EA_MED,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_ea * ~ownTrp * vot2 * tour_participants
,DRIVEALONE_TR_EA_MED,((trips.trip_mode == 'DRIVEALONE') & is_ea & ownTrp & vot2) * tour_participants
,SHARED2_TR_EA_MED,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_ea * ownTrp * vot2 * tour_participants
,SHARED3_TR_EA_MED,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_ea * ownTrp * vot2 * tour_participants
,DRIVEALONE_NOTR_EA_HIGH,((trips.trip_mode == 'DRIVEALONE') & is_ea & ~ownTrp & vot3) * tour_participants
,SHARED2_NOTR_EA_HIGH,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_ea * ~ownTrp * vot3 * tour_participants
,SHARED3_NOTR_EA_HIGH,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_ea * ~ownTrp * vot3 * tour_participants
,DRIVEALONE_TR_EA_HIGH,((trips.trip_mode == 'DRIVEALONE') & is_ea & ownTrp & vot3) * tour_participants
,SHARED2_TR_EA_HIGH,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_ea * ownTrp * vot3 * tour_participants
,SHARED3_TR_EA_HIGH,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_ea * ownTrp * vot3 * tour_participants
,WALK_LOC_EA,((trips.trip_mode == 'WALK_LOC') & is_ea) * tour_participants
,WALK_PRM_EA,((trips.trip_mode == 'WALK_PRM') & is_ea) * tour_participants
,WALK_MIX_EA,((trips.trip_mode == 'WALK_MIX') & is_ea) * tour_participants
,PNR_LOCOUT_EA,((trips.trip_mode == 'PNR_LOC') & is_ea) * tour_participants * outbound
,PNR_PRMOUT_EA,((trips.trip_mode == 'PNR_PRM') & is_ea) * tour_participants * outbound
,PNR_MIXOUT_EA,((trips.trip_mode == 'PNR_MIX') & is_ea) * tour_participants * outbound
,KNR_LOCOUT_EA,((trips.trip_mode == 'KNR_LOC') & is_ea) * tour_participants * outbound
,KNR_PRMOUT_EA,((trips.trip_mode == 'KNR_PRM') & is_ea) * tour_participants * outbound
,KNR_MIXOUT_EA,((trips.trip_mode == 'KNR_MIX') & is_ea) * tour_participants * outbound
,TNC_LOCOUT_EA,((trips.trip_mode == 'TNC_LOC') & is_ea) * tour_participants * outbound
,TNC_PRMOUT_EA,((trips.trip_mode == 'TNC_PRM') & is_ea) * tour_participants * outbound
,TNC_MIXOUT_EA,((trips.trip_mode == 'TNC_MIX') & is_ea) * tour_participants * outbound
,PNR_LOCIN_EA,((trips.trip_mode == 'PNR_LOC') & is_ea) * tour_participants * inbound
,PNR_PRMIN_EA,((trips.trip_mode == 'PNR_PRM') & is_ea) * tour_participants * inbound
,PNR_MIXIN_EA,((trips.trip_mode == 'PNR_MIX') & is_ea) * tour_participants * inbound
,KNR_LOCIN_EA,((trips.trip_mode == 'KNR_LOC') & is_ea) * tour_participants * inbound
,KNR_PRMIN_EA,((trips.trip_mode == 'KNR_PRM') & is_ea) * tour_participants * inbound
,KNR_MIXIN_EA,((trips.trip_mode == 'KNR_MIX') & is_ea) * tour_participants * inbound
,TNC_LOCIN_EA,((trips.trip_mode == 'TNC_LOC') & is_ea) * tour_participants * inbound
,TNC_PRMIN_EA,((trips.trip_mode == 'TNC_PRM') & is_ea) * tour_participants * inbound
,TNC_MIXIN_EA,((trips.trip_mode == 'TNC_MIX') & is_ea) * tour_participants * inbound
,BIKE_EA,((trips.trip_mode == 'BIKE') & is_ea) * tour_participants
,WALK_EA,((trips.trip_mode == 'WALK') & is_ea) * tour_participants
# am trips,,
,DRIVEALONE_NOTR_AM_LOW,((trips.trip_mode == 'DRIVEALONE') & is_am & ~ownTrp & vot1) * tour_participants
,SHARED2_NOTR_AM_LOW,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_am * ~ownTrp * vot1 * tour_participants
,SHARED3_NOTR_AM_LOW,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_am * ~ownTrp * vot1 * tour_participants
,DRIVEALONE_TR_AM_LOW,((trips.trip_mode == 'DRIVEALONE') & is_am & ownTrp & vot1) * tour_participants
,SHARED2_TR_AM_LOW,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_am * ownTrp * vot1 * tour_participants
,SHARED3_TR_AM_LOW,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_am * ownTrp * vot1 * tour_participants
,DRIVEALONE_NOTR_AM_MED,((trips.trip_mode == 'DRIVEALONE') & is_am & ~ownTrp & vot2) * tour_participants
,SHARED2_NOTR_AM_MED,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_am * ~ownTrp * vot2 * tour_participants
,SHARED3_NOTR_AM_MED,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_am * ~ownTrp * vot2 * tour_participants
,DRIVEALONE_TR_AM_MED,((trips.trip_mode == 'DRIVEALONE') & is_am & ownTrp & vot2) * tour_participants
,SHARED2_TR_AM_MED,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_am * ownTrp * vot2 * tour_participants
,SHARED3_TR_AM_MED,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_am * ownTrp * vot2 * tour_participants
,DRIVEALONE_NOTR_AM_HIGH,((trips.trip_mode == 'DRIVEALONE') & is_am & ~ownTrp & vot3) * tour_participants
,SHARED2_NOTR_AM_HIGH,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_am * ~ownTrp * vot3 * tour_participants
,SHARED3_NOTR_AM_HIGH,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_am * ~ownTrp * vot3 * tour_participants
,DRIVEALONE_TR_AM_HIGH,((trips.trip_mode == 'DRIVEALONE') & is_am & ownTrp & vot3) * tour_participants
,SHARED2_TR_AM_HIGH,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_am * ownTrp * vot3 * tour_participants
,SHARED3_TR_AM_HIGH,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_am * ownTrp * vot3 * tour_participants
,WALK_LOC_AM,((trips.trip_mode == 'WALK_LOC') & is_am) * tour_participants
,WALK_PRM_AM,((trips.trip_mode == 'WALK_PRM') & is_am) * tour_participants
,WALK_MIX_AM,((trips.trip_mode == 'WALK_MIX') & is_am) * tour_participants
,PNR_LOCOUT_AM,((trips.trip_mode == 'PNR_LOC') & is_am) * tour_participants * outbound
,PNR_PRMOUT_AM,((trips.trip_mode == 'PNR_PRM') & is_am) * tour_participants * outbound
,PNR_MIXOUT_AM,((trips.trip_mode == 'PNR_MIX') & is_am) * tour_participants * outbound
,KNR_LOCOUT_AM,((trips.trip_mode == 'KNR_LOC') & is_am) * tour_participants * outbound
,KNR_PRMOUT_AM,((trips.trip_mode == 'KNR_PRM') & is_am) * tour_participants * outbound
,KNR_MIXOUT_AM,((trips.trip_mode == 'KNR_MIX') & is_am) * tour_participants * outbound
,TNC_LOCOUT_AM,((trips.trip_mode == 'TNC_LOC') & is_am) * tour_participants * outbound
,TNC_PRMOUT_AM,((trips.trip_mode == 'TNC_PRM') & is_am) * tour_participants * outbound
,TNC_MIXOUT_AM,((trips.trip_mode == 'TNC_MIX') & is_am) * tour_participants * outbound
,PNR_LOCIN_AM,((trips.trip_mode == 'PNR_LOC') & is_am) * tour_participants * inbound
,PNR_PRMIN_AM,((trips.trip_mode == 'PNR_PRM') & is_am) * tour_participants * inbound
,PNR_MIXIN_AM,((trips.trip_mode == 'PNR_MIX') & is_am) * tour_participants * inbound
,KNR_LOCIN_AM,((trips.trip_mode == 'KNR_LOC') & is_am) * tour_participants * inbound
,KNR_PRMIN_AM,((trips.trip_mode == 'KNR_PRM') & is_am) * tour_participants * inbound
,KNR_MIXIN_AM,((trips.trip_mode == 'KNR_MIX') & is_am) * tour_participants * inbound
,TNC_LOCIN_AM,((trips.trip_mode == 'TNC_LOC') & is_am) * tour_participants * inbound
,TNC_PRMIN_AM,((trips.trip_mode == 'TNC_PRM') & is_am) * tour_participants * inbound
,TNC_MIXIN_AM,((trips.trip_mode == 'TNC_MIX') & is_am) * tour_participants * inbound
,BIKE_AM,((trips.trip_mode == 'BIKE') & is_am) * tour_participants
,WALK_AM,((trips.trip_mode == 'WALK') & is_am) * tour_participants
# md trips,,
,DRIVEALONE_NOTR_MD_LOW,((trips.trip_mode == 'DRIVEALONE') & is_md & ~ownTrp & vot1) * tour_participants
,SHARED2_NOTR_MD_LOW,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_md * ~ownTrp * vot1 * tour_participants
,SHARED3_NOTR_MD_LOW,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_md * ~ownTrp * vot1 * tour_participants
,DRIVEALONE_TR_MD_LOW,((trips.trip_mode == 'DRIVEALONE') & is_md & ownTrp & vot1) * tour_participants
,SHARED2_TR_MD_LOW,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_md * ownTrp * vot1 * tour_participants
,SHARED3_TR_MD_LOW,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_md * ownTrp * vot1 * tour_participants
,DRIVEALONE_NOTR_MD_MED,((trips.trip_mode == 'DRIVEALONE') & is_md & ~ownTrp & vot2) * tour_participants
,SHARED2_NOTR_MD_MED,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_md * ~ownTrp * vot2 * tour_participants
,SHARED3_NOTR_MD_MED,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_md * ~ownTrp * vot2 * tour_participants
,DRIVEALONE_TR_MD_MED,((trips.trip_mode == 'DRIVEALONE') & is_md & ownTrp & vot2) * tour_participants
,SHARED2_TR_MD_MED,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_md * ownTrp * vot2 * tour_participants
,SHARED3_TR_MD_MED,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_md * ownTrp * vot2 * tour_participants
,DRIVEALONE_NOTR_MD_HIGH,((trips.trip_mode == 'DRIVEALONE') & is_md & ~ownTrp & vot3) * tour_participants
,SHARED2_NOTR_MD_HIGH,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_md * ~ownTrp * vot3 * tour_participants
,SHARED3_NOTR_MD_HIGH,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_md * ~ownTrp * vot3 * tour_participants
,DRIVEALONE_TR_MD_HIGH,((trips.trip_mode == 'DRIVEALONE') & is_md & ownTrp & vot3) * tour_participants
,SHARED2_TR_MD_HIGH,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_md * ownTrp * vot3 * tour_participants
,SHARED3_TR_MD_HIGH,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_md * ownTrp * vot3 * tour_participants
,WALK_LOC_MD,((trips.trip_mode == 'WALK_LOC') & is_md) * tour_participants
,WALK_PRM_MD,((trips.trip_mode == 'WALK_PRM') & is_md) * tour_participants
,WALK_MIX_MD,((trips.trip_mode == 'WALK_MIX') & is_md) * tour_participants
,PNR_LOCOUT_MD,((trips.trip_mode == 'PNR_LOC') & is_md) * tour_participants * outbound
,PNR_PRMOUT_MD,((trips.trip_mode == 'PNR_PRM') & is_md) * tour_participants * outbound
,PNR_MIXOUT_MD,((trips.trip_mode == 'PNR_MIX') & is_md) * tour_participants * outbound
,KNR_LOCOUT_MD,((trips.trip_mode == 'KNR_LOC') & is_md) * tour_participants * outbound
,KNR_PRMOUT_MD,((trips.trip_mode == 'KNR_PRM') & is_md) * tour_participants * outbound
,KNR_MIXOUT_MD,((trips.trip_mode == 'KNR_MIX') & is_md) * tour_participants * outbound
,TNC_LOCOUT_MD,((trips.trip_mode == 'TNC_LOC') & is_md) * tour_participants * outbound
,TNC_PRMOUT_MD,((trips.trip_mode == 'TNC_PRM') & is_md) * tour_participants * outbound
,TNC_MIXOUT_MD,((trips.trip_mode == 'TNC_MIX') & is_md) * tour_participants * outbound
,PNR_LOCIN_MD,((trips.trip_mode == 'PNR_LOC') & is_md) * tour_participants * inbound
,PNR_PRMIN_MD,((trips.trip_mode == 'PNR_PRM') & is_md) * tour_participants * inbound
,PNR_MIXIN_MD,((trips.trip_mode == 'PNR_MIX') & is_md) * tour_participants * inbound
,KNR_LOCIN_MD,((trips.trip_mode == 'KNR_LOC') & is_md) * tour_participants * inbound
,KNR_PRMIN_MD,((trips.trip_mode == 'KNR_PRM') & is_md) * tour_participants * inbound
,KNR_MIXIN_MD,((trips.trip_mode == 'KNR_MIX') & is_md) * tour_participants * inbound
,TNC_LOCIN_MD,((trips.trip_mode == 'TNC_LOC') & is_md) * tour_participants * inbound
,TNC_PRMIN_MD,((trips.trip_mode == 'TNC_PRM') & is_md) * tour_participants * inbound
,TNC_MIXIN_MD,((trips.trip_mode == 'TNC_MIX') & is_md) * tour_participants * inbound
,BIKE_MD,((trips.trip_mode == 'BIKE') & is_md) * tour_participants
,WALK_MD,((trips.trip_mode == 'WALK') & is_md) * tour_participants
# pm trips,,
,DRIVEALONE_NOTR_PM_LOW,((trips.trip_mode == 'DRIVEALONE') & is_pm & ~ownTrp & vot1) * tour_participants
,SHARED2_NOTR_PM_LOW,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_pm * ~ownTrp * vot1 * tour_participants
,SHARED3_NOTR_PM_LOW,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_pm * ~ownTrp * vot1 * tour_participants
,DRIVEALONE_TR_PM_LOW,((trips.trip_mode == 'DRIVEALONE') & is_pm & ownTrp & vot1) * tour_participants
,SHARED2_TR_PM_LOW,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_pm * ownTrp * vot1 * tour_participants
,SHARED3_TR_PM_LOW,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_pm * ownTrp * vot1 * tour_participants
,DRIVEALONE_NOTR_PM_MED,((trips.trip_mode == 'DRIVEALONE') & is_pm & ~ownTrp & vot2) * tour_participants
,SHARED2_NOTR_PM_MED,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_pm * ~ownTrp * vot2 * tour_participants
,SHARED3_NOTR_PM_MED,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_pm * ~ownTrp * vot2 * tour_participants
,DRIVEALONE_TR_PM_MED,((trips.trip_mode == 'DRIVEALONE') & is_pm & ownTrp & vot2) * tour_participants
,SHARED2_TR_PM_MED,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_pm * ownTrp * vot2 * tour_participants
,SHARED3_TR_PM_MED,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_pm * ownTrp * vot2 * tour_participants
,DRIVEALONE_NOTR_PM_HIGH,((trips.trip_mode == 'DRIVEALONE') & is_pm & ~ownTrp & vot3) * tour_participants
,SHARED2_NOTR_PM_HIGH,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_pm * ~ownTrp * vot3 * tour_participants
,SHARED3_NOTR_PM_HIGH,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_pm * ~ownTrp * vot3 * tour_participants
,DRIVEALONE_TR_PM_HIGH,((trips.trip_mode == 'DRIVEALONE') & is_pm & ownTrp & vot3) * tour_participants
,SHARED2_TR_PM_HIGH,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_pm * ownTrp * vot3 * tour_participants
,SHARED3_TR_PM_HIGH,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_pm * ownTrp * vot3 * tour_participants
,WALK_LOC_PM,((trips.trip_mode == 'WALK_LOC') & is_pm) * tour_participants
,WALK_PRM_PM,((trips.trip_mode == 'WALK_PRM') & is_pm) * tour_participants
,WALK_MIX_PM,((trips.trip_mode == 'WALK_MIX') & is_pm) * tour_participants
,PNR_LOCOUT_PM,((trips.trip_mode == 'PNR_LOC') & is_pm) * tour_participants * outbound
,PNR_PRMOUT_PM,((trips.trip_mode == 'PNR_PRM') & is_pm) * tour_participants * outbound
,PNR_MIXOUT_PM,((trips.trip_mode == 'PNR_MIX') & is_pm) * tour_participants * outbound
,KNR_LOCOUT_PM,((trips.trip_mode == 'KNR_LOC') & is_pm) * tour_participants * outbound
,KNR_PRMOUT_PM,((trips.trip_mode == 'KNR_PRM') & is_pm) * tour_participants * outbound
,KNR_MIXOUT_PM,((trips.trip_mode == 'KNR_MIX') & is_pm) * tour_participants * outbound
,TNC_LOCOUT_PM,((trips.trip_mode == 'TNC_LOC') & is_pm) * tour_participants * outbound
,TNC_PRMOUT_PM,((trips.trip_mode == 'TNC_PRM') & is_pm) * tour_participants * outbound
,TNC_MIXOUT_PM,((trips.trip_mode == 'TNC_MIX') & is_pm) * tour_participants * outbound
,PNR_LOCIN_PM,((trips.trip_mode == 'PNR_LOC') & is_pm) * tour_participants * inbound
,PNR_PRMIN_PM,((trips.trip_mode == 'PNR_PRM') & is_pm) * tour_participants * inbound
,PNR_MIXIN_PM,((trips.trip_mode == 'PNR_MIX') & is_pm) * tour_participants * inbound
,KNR_LOCIN_PM,((trips.trip_mode == 'KNR_LOC') & is_pm) * tour_participants * inbound
,KNR_PRMIN_PM,((trips.trip_mode == 'KNR_PRM') & is_pm) * tour_participants * inbound
,KNR_MIXIN_PM,((trips.trip_mode == 'KNR_MIX') & is_pm) * tour_participants * inbound
,TNC_LOCIN_PM,((trips.trip_mode == 'TNC_LOC') & is_pm) * tour_participants * inbound
,TNC_PRMIN_PM,((trips.trip_mode == 'TNC_PRM') & is_pm) * tour_participants * inbound
,TNC_MIXIN_PM,((trips.trip_mode == 'TNC_MIX') & is_pm) * tour_participants * inbound
,BIKE_PM,((trips.trip_mode == 'BIKE') & is_pm) * tour_participants
,WALK_PM,((trips.trip_mode == 'WALK') & is_pm) * tour_participants
# ev trips,,
,DRIVEALONE_NOTR_EV_LOW,((trips.trip_mode == 'DRIVEALONE') & is_ev & ~ownTrp & vot1) * tour_participants
,SHARED2_NOTR_EV_LOW,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_ev * ~ownTrp * vot1 * tour_participants
,SHARED3_NOTR_EV_LOW,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_ev * ~ownTrp * vot1 * tour_participants
,DRIVEALONE_TR_EV_LOW,((trips.trip_mode == 'DRIVEALONE') & is_ev & ownTrp & vot1) * tour_participants
,SHARED2_TR_EV_LOW,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_ev * ownTrp * vot1 * tour_participants
,SHARED3_TR_EV_LOW,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_ev * ownTrp * vot1 * tour_participants
,DRIVEALONE_NOTR_EV_MED,((trips.trip_mode == 'DRIVEALONE') & is_ev & ~ownTrp & vot2) * tour_participants
,SHARED2_NOTR_EV_MED,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_ev * ~ownTrp * vot2 * tour_participants
,SHARED3_NOTR_EV_MED,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_ev * ~ownTrp * vot2 * tour_participants
,DRIVEALONE_TR_EV_MED,((trips.trip_mode == 'DRIVEALONE') & is_ev & ownTrp & vot2) * tour_participants
,SHARED2_TR_EV_MED,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_ev * ownTrp * vot2 * tour_participants
,SHARED3_TR_EV_MED,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_ev * ownTrp * vot2 * tour_participants
,DRIVEALONE_NOTR_EV_HIGH,((trips.trip_mode == 'DRIVEALONE') & is_ev & ~ownTrp & vot3) * tour_participants
,SHARED2_NOTR_EV_HIGH,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_ev * ~ownTrp * vot3 * tour_participants
,SHARED3_NOTR_EV_HIGH,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_ev * ~ownTrp * vot3 * tour_participants
,DRIVEALONE_TR_EV_HIGH,((trips.trip_mode == 'DRIVEALONE') & is_ev & ownTrp & vot3) * tour_participants
,SHARED2_TR_EV_HIGH,(trips.trip_mode.isin(['SHARED2'])/OCC_SHARED2)* is_ev * ownTrp * vot3 * tour_participants
,SHARED3_TR_EV_HIGH,(trips.trip_mode.isin(['SHARED3'])/OCC_SHARED3)* is_ev * ownTrp * vot3 * tour_participants
,WALK_LOC_EV,((trips.trip_mode == 'WALK_LOC') & is_ev) * tour_participants
,WALK_PRM_EV,((trips.trip_mode == 'WALK_PRM') & is_ev) * tour_participants
,WALK_MIX_EV,((trips.trip_mode == 'WALK_MIX') & is_ev) * tour_participants
,PNR_LOCOUT_EV,((trips.trip_mode == 'PNR_LOC') & is_ev) * tour_participants * outbound
,PNR_PRMOUT_EV,((trips.trip_mode == 'PNR_PRM') & is_ev) * tour_participants * outbound
,PNR_MIXOUT_EV,((trips.trip_mode == 'PNR_MIX') & is_ev) * tour_participants * outbound
,KNR_LOCOUT_EV,((trips.trip_mode == 'KNR_LOC') & is_ev) * tour_participants * outbound
,KNR_PRMOUT_EV,((trips.trip_mode == 'KNR_PRM') & is_ev) * tour_participants * outbound
,KNR_MIXOUT_EV,((trips.trip_mode == 'KNR_MIX') & is_ev) * tour_participants * outbound
,TNC_LOCOUT_EV,((trips.trip_mode == 'TNC_LOC') & is_ev) * tour_participants * outbound
,TNC_PRMOUT_EV,((trips.trip_mode == 'TNC_PRM') & is_ev) * tour_participants * outbound
,TNC_MIXOUT_EV,((trips.trip_mode == 'TNC_MIX') & is_ev) * tour_participants * outbound
,PNR_LOCIN_EV,((trips.trip_mode == 'PNR_LOC') & is_ev) * tour_participants * inbound
,PNR_PRMIN_EV,((trips.trip_mode == 'PNR_PRM') & is_ev) * tour_participants * inbound
,PNR_MIXIN_EV,((trips.trip_mode == 'PNR_MIX') & is_ev) * tour_participants * inbound
,KNR_LOCIN_EV,((trips.trip_mode == 'KNR_LOC') & is_ev) * tour_participants * inbound
,KNR_PRMIN_EV,((trips.trip_mode == 'KNR_PRM') & is_ev) * tour_participants * inbound
,KNR_MIXIN_EV,((trips.trip_mode == 'KNR_MIX') & is_ev) * tour_participants * inbound
,TNC_LOCIN_EV,((trips.trip_mode == 'TNC_LOC') & is_ev) * tour_participants * inbound
,TNC_PRMIN_EV,((trips.trip_mode == 'TNC_PRM') & is_ev) * tour_participants * inbound
,TNC_MIXIN_EV,((trips.trip_mode == 'TNC_MIX') & is_ev) * tour_participants * inbound
,BIKE_EV,((trips.trip_mode == 'BIKE') & is_ev) * tour_participants
,WALK_EV,((trips.trip_mode == 'WALK') & is_ev) * tour_participants
#auto skims,,
,_timeDrive,"odt_skims['SOV_NT_L_TIME'] * np.where(((trips.trip_mode == 'DRIVEALONE') & ~ownTrp & vot1),1,0)"
,_timeDrive,"_timeDrive + odt_skims['SOV_TR_L_TIME'] * np.where(((trips.trip_mode == 'DRIVEALONE') & ownTrp & vot1),1,0)"
,_timeDrive,"_timeDrive + odt_skims['HOV2_L_TIME'] * np.where(((trips.trip_mode.isin(['SHARED2','TAXI','TNC_SINGLE'])) & vot1),1,0)"
,_timeDrive,"_timeDrive + odt_skims['HOV3_L_TIME'] * np.where(((trips.trip_mode == 'SHARED3') & vot1),1,0)"
,_timeDrive,"_timeDrive + odt_skims['HOV3_L_TIME'] * np.where(((trips.trip_mode == 'TNC_SHARED') & vot1 & ~trips.nev_available & ~trips.microtransit_available),1,0)"
,_timeDrive,"_timeDrive + odt_skims['SOV_NT_M_TIME'] * np.where(((trips.trip_mode == 'DRIVEALONE') & ~ownTrp & vot2),1,0)"
,_timeDrive,"_timeDrive + odt_skims['SOV_TR_M_TIME'] * np.where(((trips.trip_mode == 'DRIVEALONE') & ownTrp & vot2),1,0)"
,_timeDrive,"_timeDrive + odt_skims['HOV2_M_TIME'] * np.where(((trips.trip_mode.isin(['SHARED2','TAXI','TNC_SINGLE'])) & vot2),1,0)"
,_timeDrive,"_timeDrive + odt_skims['HOV3_M_TIME'] * np.where(((trips.trip_mode == 'SHARED3') & vot2),1,0)"
,_timeDrive,"_timeDrive + odt_skims['HOV3_M_TIME'] * TNC_shared_IVTFactor * np.where(((trips.trip_mode == 'TNC_SHARED') & vot2 & ~trips.nev_available & ~trips.microtransit_available),1,0)"
,_timeDrive,"_timeDrive + odt_skims['SOV_NT_H_TIME'] * np.where(((trips.trip_mode == 'DRIVEALONE') & ~ownTrp & vot3),1,0)"
,_timeDrive,"_timeDrive + odt_skims['SOV_TR_H_TIME'] * np.where(((trips.trip_mode == 'DRIVEALONE') & ownTrp & vot3),1,0)"
,_timeDrive,"_timeDrive + odt_skims['HOV2_H_TIME'] * np.where(((trips.trip_mode.isin(['SHARED2','TAXI','TNC_SINGLE'])) & vot3),1,0)"
,_timeDrive,"_timeDrive + odt_skims['HOV3_H_TIME'] * np.where(((trips.trip_mode == 'SHARED3') & vot3),1,0)"
,timeDrive,"_timeDrive + odt_skims['HOV3_H_TIME'] * TNC_shared_IVTFactor * np.where(((trips.trip_mode == 'TNC_SHARED') & vot3 & ~trips.nev_available & ~trips.microtransit_available),1,0)"
,_distanceDrive,"odt_skims['SOV_NT_L_DIST'] * np.where(((trips.trip_mode == 'DRIVEALONE') & ~ownTrp & vot1),1,0)"
,_distanceDrive,"_distanceDrive + odt_skims['SOV_TR_L_DIST'] * np.where(((trips.trip_mode == 'DRIVEALONE') & ownTrp & vot1),1,0)"
,_distanceDrive,"_distanceDrive + odt_skims['HOV2_L_DIST'] * np.where(((trips.trip_mode.isin(['SHARED2','TAXI','TNC_SINGLE'])) & vot1),1,0)"
,_distanceDrive,"_distanceDrive + odt_skims['HOV3_L_DIST'] * np.where(((trips.trip_mode == 'SHARED3') & vot1),1,0)"
,_distanceDrive,"_distanceDrive + odt_skims['HOV3_L_DIST'] * np.where(((trips.trip_mode == 'TNC_SHARED') & vot1 & ~trips.nev_available & ~trips.microtransit_available),1,0)"
,_distanceDrive,"_distanceDrive + odt_skims['SOV_NT_M_DIST'] * np.where(((trips.trip_mode == 'DRIVEALONE') & ~ownTrp & vot2),1,0)"
,_distanceDrive,"_distanceDrive + odt_skims['SOV_TR_M_DIST'] * np.where(((trips.trip_mode == 'DRIVEALONE') & ownTrp & vot2),1,0)"
,_distanceDrive,"_distanceDrive + odt_skims['HOV2_M_DIST'] * np.where(((trips.trip_mode.isin(['SHARED2','TAXI','TNC_SINGLE'])) & vot2),1,0)"
,_distanceDrive,"_distanceDrive + odt_skims['HOV3_M_DIST'] * np.where(((trips.trip_mode == 'SHARED3') & vot2),1,0)"
,_distanceDrive,"_distanceDrive + odt_skims['HOV3_M_DIST'] * TNC_shared_IVTFactor * np.where(((trips.trip_mode == 'TNC_SHARED') & vot2 & ~trips.nev_available & ~trips.microtransit_available),1,0)"
,_distanceDrive,"_distanceDrive + odt_skims['SOV_NT_H_DIST'] * np.where(((trips.trip_mode == 'DRIVEALONE') & ~ownTrp & vot3),1,0)"
,_distanceDrive,"_distanceDrive + odt_skims['SOV_TR_H_DIST'] * np.where(((trips.trip_mode == 'DRIVEALONE') & ownTrp & vot3),1,0)"
,_distanceDrive,"_distanceDrive + odt_skims['HOV2_H_DIST'] * np.where(((trips.trip_mode.isin(['SHARED2','TAXI','TNC_SINGLE'])) & vot3),1,0)"
,_distanceDrive,"_distanceDrive + odt_skims['HOV3_H_DIST'] * np.where(((trips.trip_mode == 'SHARED3') & vot3),1,0)"
,distanceDrive,"_distanceDrive + odt_skims['HOV3_H_DIST'] * TNC_shared_IVTFactor * np.where(((trips.trip_mode == 'TNC_SHARED') & vot3 & ~trips.nev_available & ~trips.microtransit_available),1,0)"
,_costTollDrive,"odt_skims['SOV_NT_L_TOLLCOST'] * np.where(((trips.trip_mode == 'DRIVEALONE') & ~ownTrp & vot1),1,0)"
,_costTollDrive,"_costTollDrive + odt_skims['SOV_TR_L_TOLLCOST'] * np.where(((trips.trip_mode == 'DRIVEALONE') & ownTrp & vot1),1,0)"
,_costTollDrive,"_costTollDrive + (odt_skims['HOV2_L_TOLLCOST'] / np.where(_is_joint,tour_participants,OCC_SHARED2)) * np.where(((trips.trip_mode == 'SHARED2') & vot1),1,0)"
,_costTollDrive,"_costTollDrive + (odt_skims['HOV3_L_TOLLCOST'] / np.where(_is_joint,tour_participants,OCC_SHARED3)) * np.where(((trips.trip_mode == 'SHARED3') & vot1),1,0)"
,_costTollDrive,"_costTollDrive + odt_skims['SOV_NT_M_TOLLCOST'] * np.where(((trips.trip_mode == 'DRIVEALONE') & ~ownTrp & vot2),1,0)"
,_costTollDrive,"_costTollDrive + odt_skims['SOV_TR_M_TOLLCOST'] * np.where(((trips.trip_mode == 'DRIVEALONE') & ownTrp & vot2),1,0)"
,_costTollDrive,"_costTollDrive + (odt_skims['HOV2_M_TOLLCOST'] / np.where(_is_joint,tour_participants,OCC_SHARED2)) * np.where(((trips.trip_mode == 'SHARED2') & vot2),1,0)"
,_costTollDrive,"_costTollDrive + (odt_skims['HOV3_M_TOLLCOST'] / np.where(_is_joint,tour_participants,OCC_SHARED3)) * np.where(((trips.trip_mode == 'SHARED3') & vot2),1,0)"
,_costTollDrive,"_costTollDrive + odt_skims['SOV_NT_H_TOLLCOST'] * np.where(((trips.trip_mode == 'DRIVEALONE') & ~ownTrp & vot3),1,0)"
,_costTollDrive,"_costTollDrive + odt_skims['SOV_TR_H_TOLLCOST'] * np.where(((trips.trip_mode == 'DRIVEALONE') & ownTrp & vot3),1,0)"
,_costTollDrive,"_costTollDrive + (odt_skims['HOV2_H_TOLLCOST'] / np.where(_is_joint,tour_participants,OCC_SHARED2)) * np.where(((trips.trip_mode == 'SHARED2') & vot3),1,0)"
,costTollDrive,"_costTollDrive + (odt_skims['HOV3_H_TOLLCOST'] / np.where(_is_joint,tour_participants,OCC_SHARED3)) * np.where(((trips.trip_mode == 'SHARED3') & vot3),1,0)"
#transit skims,,
,_timeTransitInVehicle,"odt_skims['WALK_LOC_TOTALIVTT'] * np.where(trips.trip_mode == 'WALK_LOC',1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['WALK_PRM_TOTALIVTT'] * np.where(trips.trip_mode == 'WALK_PRM',1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['WALK_MIX_TOTALIVTT'] * np.where(trips.trip_mode == 'WALK_MIX',1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['PNROUT_LOC_TOTALIVTT'] * np.where(trips.trip_mode == 'PNR_LOC',1,0) * np.where(trips.outbound,1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['PNROUT_PRM_TOTALIVTT'] * np.where(trips.trip_mode == 'PNR_PRM',1,0) * np.where(trips.outbound,1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['PNROUT_MIX_TOTALIVTT'] * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['KNROUT_LOC_TOTALIVTT'] * np.where(trips.trip_mode == 'KNR_LOC',1,0) * np.where(trips.outbound,1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['KNROUT_PRM_TOTALIVTT'] * np.where(trips.trip_mode == 'KNR_PRM',1,0) * np.where(trips.outbound,1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['KNROUT_MIX_TOTALIVTT'] * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['KNROUT_LOC_TOTALIVTT'] * np.where(trips.trip_mode == 'TNC_LOC',1,0) * np.where(trips.outbound,1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['KNROUT_PRM_TOTALIVTT'] * np.where(trips.trip_mode == 'TNC_PRM',1,0) * np.where(trips.outbound,1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['KNROUT_MIX_TOTALIVTT'] * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['PNRIN_LOC_TOTALIVTT'] * np.where(trips.trip_mode == 'PNR_LOC',1,0) * np.where(~trips.outbound,1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['PNRIN_PRM_TOTALIVTT'] * np.where(trips.trip_mode == 'PNR_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['PNRIN_MIX_TOTALIVTT'] * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['KNRIN_LOC_TOTALIVTT'] * np.where(trips.trip_mode == 'KNR_LOC',1,0) * np.where(~trips.outbound,1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['KNRIN_PRM_TOTALIVTT'] * np.where(trips.trip_mode == 'KNR_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['KNRIN_MIX_TOTALIVTT'] * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['KNRIN_LOC_TOTALIVTT'] * np.where(trips.trip_mode == 'TNC_LOC',1,0) * np.where(~trips.outbound,1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['KNRIN_PRM_TOTALIVTT'] * np.where(trips.trip_mode == 'TNC_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_timeTransitInVehicle,"_timeTransitInVehicle + odt_skims['KNRIN_MIX_TOTALIVTT'] * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(~trips.outbound,1,0)"
,timeTransitInVehicle,"_timeTransitInVehicle + trips.time_nev_in_vehicle + trips.time_microtransit_in_vehicle + trips.time_sch_bus_in_vehicle"
#,,
,_timeRapidTransitInVehicle,"odt_skims['WALK_PRM_BRTIVTT'] * np.where(trips.trip_mode == 'WALK_PRM',1,0)"
,_timeRapidTransitInVehicle,"_timeRapidTransitInVehicle + odt_skims['WALK_MIX_BRTIVTT'] * np.where(trips.trip_mode == 'WALK_MIX',1,0)"
,_timeRapidTransitInVehicle,"_timeRapidTransitInVehicle + odt_skims['PNROUT_PRM_BRTIVTT'] * np.where(trips.trip_mode == 'PNR_PRM',1,0) * np.where(trips.outbound,1,0)"
,_timeRapidTransitInVehicle,"_timeRapidTransitInVehicle + odt_skims['PNROUT_MIX_BRTIVTT'] * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeRapidTransitInVehicle,"_timeRapidTransitInVehicle + odt_skims['KNROUT_PRM_BRTIVTT'] * np.where(trips.trip_mode == 'KNR_PRM',1,0) * np.where(trips.outbound,1,0)"
,_timeRapidTransitInVehicle,"_timeRapidTransitInVehicle + odt_skims['KNROUT_MIX_BRTIVTT'] * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeRapidTransitInVehicle,"_timeRapidTransitInVehicle + odt_skims['KNROUT_PRM_BRTIVTT'] * np.where(trips.trip_mode == 'TNC_PRM',1,0) * np.where(trips.outbound,1,0)"
,_timeRapidTransitInVehicle,"_timeRapidTransitInVehicle + odt_skims['KNROUT_MIX_BRTIVTT'] * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeRapidTransitInVehicle,"_timeRapidTransitInVehicle + odt_skims['PNRIN_PRM_BRTIVTT'] * np.where(trips.trip_mode == 'PNR_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_timeRapidTransitInVehicle,"_timeRapidTransitInVehicle + odt_skims['PNRIN_MIX_BRTIVTT'] * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_timeRapidTransitInVehicle,"_timeRapidTransitInVehicle + odt_skims['KNRIN_PRM_BRTIVTT'] * np.where(trips.trip_mode == 'KNR_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_timeRapidTransitInVehicle,"_timeRapidTransitInVehicle + odt_skims['KNRIN_MIX_BRTIVTT'] * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_timeRapidTransitInVehicle,"_timeRapidTransitInVehicle + odt_skims['KNRIN_PRM_BRTIVTT'] * np.where(trips.trip_mode == 'TNC_PRM',1,0) * np.where(~trips.outbound,1,0)"
,timeRapidTransitInVehicle,"_timeRapidTransitInVehicle + odt_skims['KNRIN_MIX_BRTIVTT'] * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(~trips.outbound,1,0)"
#,,
,_timeExpressBusTransitInVehicle,"odt_skims['WALK_PRM_EXPIVTT'] * np.where(trips.trip_mode == 'WALK_PRM',1,0)"
,_timeExpressBusTransitInVehicle,"_timeExpressBusTransitInVehicle + odt_skims['WALK_MIX_EXPIVTT'] * np.where(trips.trip_mode == 'WALK_MIX',1,0)"
,_timeExpressBusTransitInVehicle,"_timeExpressBusTransitInVehicle + odt_skims['PNROUT_PRM_EXPIVTT'] * np.where(trips.trip_mode == 'PNR_PRM',1,0) * np.where(trips.outbound,1,0)"
,_timeExpressBusTransitInVehicle,"_timeExpressBusTransitInVehicle + odt_skims['PNROUT_MIX_EXPIVTT'] * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeExpressBusTransitInVehicle,"_timeExpressBusTransitInVehicle + odt_skims['KNROUT_PRM_EXPIVTT'] * np.where(trips.trip_mode == 'KNR_PRM',1,0) * np.where(trips.outbound,1,0)"
,_timeExpressBusTransitInVehicle,"_timeExpressBusTransitInVehicle + odt_skims['KNROUT_MIX_EXPIVTT'] * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeExpressBusTransitInVehicle,"_timeExpressBusTransitInVehicle + odt_skims['KNROUT_PRM_EXPIVTT'] * np.where(trips.trip_mode == 'TNC_PRM',1,0) * np.where(trips.outbound,1,0)"
,_timeExpressBusTransitInVehicle,"_timeExpressBusTransitInVehicle + odt_skims['KNROUT_MIX_EXPIVTT'] * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeExpressBusTransitInVehicle,"_timeExpressBusTransitInVehicle + odt_skims['PNRIN_PRM_EXPIVTT'] * np.where(trips.trip_mode == 'PNR_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_timeExpressBusTransitInVehicle,"_timeExpressBusTransitInVehicle + odt_skims['PNRIN_MIX_EXPIVTT'] * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_timeExpressBusTransitInVehicle,"_timeExpressBusTransitInVehicle + odt_skims['KNRIN_PRM_EXPIVTT'] * np.where(trips.trip_mode == 'KNR_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_timeExpressBusTransitInVehicle,"_timeExpressBusTransitInVehicle + odt_skims['KNRIN_MIX_EXPIVTT'] * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_timeExpressBusTransitInVehicle,"_timeExpressBusTransitInVehicle + odt_skims['KNRIN_PRM_EXPIVTT'] * np.where(trips.trip_mode == 'TNC_PRM',1,0) * np.where(~trips.outbound,1,0)"
,timeExpressBusTransitInVehicle,"_timeExpressBusTransitInVehicle + odt_skims['KNRIN_MIX_EXPIVTT'] * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(~trips.outbound,1,0)"
#,,
,_timeLocalBusTransitInVehicle,"odt_skims['WALK_LOC_BUSIVTT'] * np.where(trips.trip_mode == 'WALK_LOC',1,0)"
,_timeLocalBusTransitInVehicle,"_timeLocalBusTransitInVehicle + odt_skims['WALK_MIX_BUSIVTT'] * np.where(trips.trip_mode == 'WALK_MIX',1,0)"
,_timeLocalBusTransitInVehicle,"_timeLocalBusTransitInVehicle + odt_skims['PNROUT_LOC_BUSIVTT'] * np.where(trips.trip_mode == 'PNR_LOC',1,0) * np.where(trips.outbound,1,0)"
,_timeLocalBusTransitInVehicle,"_timeLocalBusTransitInVehicle + odt_skims['PNROUT_MIX_BUSIVTT'] * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeLocalBusTransitInVehicle,"_timeLocalBusTransitInVehicle + odt_skims['KNROUT_LOC_BUSIVTT'] * np.where(trips.trip_mode == 'KNR_LOC',1,0) * np.where(trips.outbound,1,0)"
,_timeLocalBusTransitInVehicle,"_timeLocalBusTransitInVehicle + odt_skims['KNROUT_MIX_BUSIVTT'] * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeLocalBusTransitInVehicle,"_timeLocalBusTransitInVehicle + odt_skims['KNROUT_LOC_BUSIVTT'] * np.where(trips.trip_mode == 'TNC_LOC',1,0) * np.where(trips.outbound,1,0)"
,_timeLocalBusTransitInVehicle,"_timeLocalBusTransitInVehicle + odt_skims['KNROUT_MIX_BUSIVTT'] * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeLocalBusTransitInVehicle,"_timeLocalBusTransitInVehicle + odt_skims['PNRIN_LOC_BUSIVTT'] * np.where(trips.trip_mode == 'PNR_LOC',1,0) * np.where(~trips.outbound,1,0)"
,_timeLocalBusTransitInVehicle,"_timeLocalBusTransitInVehicle + odt_skims['PNRIN_MIX_BUSIVTT'] * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_timeLocalBusTransitInVehicle,"_timeLocalBusTransitInVehicle + odt_skims['KNRIN_LOC_BUSIVTT'] * np.where(trips.trip_mode == 'KNR_LOC',1,0) * np.where(~trips.outbound,1,0)"
,_timeLocalBusTransitInVehicle,"_timeLocalBusTransitInVehicle + odt_skims['KNRIN_MIX_BUSIVTT'] * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_timeLocalBusTransitInVehicle,"_timeLocalBusTransitInVehicle + odt_skims['KNRIN_LOC_BUSIVTT'] * np.where(trips.trip_mode == 'TNC_LOC',1,0) * np.where(~trips.outbound,1,0)"
,timeLocalBusTransitInVehicle,"_timeLocalBusTransitInVehicle + odt_skims['KNRIN_MIX_BUSIVTT'] * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(~trips.outbound,1,0)"
#,,
,_timeLightRailTransitInVehicle,"odt_skims['WALK_PRM_LRTIVTT'] * np.where(trips.trip_mode == 'WALK_PRM',1,0)"
,_timeLightRailTransitInVehicle,"_timeLightRailTransitInVehicle + odt_skims['WALK_MIX_LRTIVTT'] * np.where(trips.trip_mode == 'WALK_MIX',1,0)"
,_timeLightRailTransitInVehicle,"_timeLightRailTransitInVehicle + odt_skims['PNROUT_PRM_LRTIVTT'] * np.where(trips.trip_mode == 'PNR_PRM',1,0) * np.where(trips.outbound,1,0)"
,_timeLightRailTransitInVehicle,"_timeLightRailTransitInVehicle + odt_skims['PNROUT_MIX_LRTIVTT'] * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeLightRailTransitInVehicle,"_timeLightRailTransitInVehicle + odt_skims['KNROUT_PRM_LRTIVTT'] * np.where(trips.trip_mode == 'KNR_PRM',1,0) * np.where(trips.outbound,1,0)"
,_timeLightRailTransitInVehicle,"_timeLightRailTransitInVehicle + odt_skims['KNROUT_MIX_LRTIVTT'] * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeLightRailTransitInVehicle,"_timeLightRailTransitInVehicle + odt_skims['KNROUT_PRM_LRTIVTT'] * np.where(trips.trip_mode == 'TNC_PRM',1,0) * np.where(trips.outbound,1,0)"
,_timeLightRailTransitInVehicle,"_timeLightRailTransitInVehicle + odt_skims['KNROUT_MIX_LRTIVTT'] * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeLightRailTransitInVehicle,"_timeLightRailTransitInVehicle + odt_skims['PNRIN_PRM_LRTIVTT'] * np.where(trips.trip_mode == 'PNR_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_timeLightRailTransitInVehicle,"_timeLightRailTransitInVehicle + odt_skims['PNRIN_MIX_LRTIVTT'] * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_timeLightRailTransitInVehicle,"_timeLightRailTransitInVehicle + odt_skims['KNRIN_PRM_LRTIVTT'] * np.where(trips.trip_mode == 'KNR_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_timeLightRailTransitInVehicle,"_timeLightRailTransitInVehicle + odt_skims['KNRIN_MIX_LRTIVTT'] * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_timeLightRailTransitInVehicle,"_timeLightRailTransitInVehicle + odt_skims['KNRIN_PRM_LRTIVTT'] * np.where(trips.trip_mode == 'TNC_PRM',1,0) * np.where(~trips.outbound,1,0)"
,timeLightRailTransitInVehicle,"_timeLightRailTransitInVehicle + odt_skims['KNRIN_MIX_LRTIVTT'] * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(~trips.outbound,1,0)"
#,,
,_timeCommuterRailTransitInVehicle,"odt_skims['WALK_PRM_CMRIVTT'] * np.where(trips.trip_mode == 'WALK_PRM',1,0)"
,_timeCommuterRailTransitInVehicle,"_timeCommuterRailTransitInVehicle + odt_skims['WALK_MIX_CMRIVTT'] * np.where(trips.trip_mode == 'WALK_MIX',1,0)"
,_timeCommuterRailTransitInVehicle,"_timeCommuterRailTransitInVehicle + odt_skims['PNROUT_PRM_CMRIVTT'] * np.where(trips.trip_mode == 'PNR_PRM',1,0) * np.where(trips.outbound,1,0)"
,_timeCommuterRailTransitInVehicle,"_timeCommuterRailTransitInVehicle + odt_skims['PNROUT_MIX_CMRIVTT'] * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeCommuterRailTransitInVehicle,"_timeCommuterRailTransitInVehicle + odt_skims['KNROUT_PRM_CMRIVTT'] * np.where(trips.trip_mode == 'KNR_PRM',1,0) * np.where(trips.outbound,1,0)"
,_timeCommuterRailTransitInVehicle,"_timeCommuterRailTransitInVehicle + odt_skims['KNROUT_MIX_CMRIVTT'] * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeCommuterRailTransitInVehicle,"_timeCommuterRailTransitInVehicle + odt_skims['KNROUT_PRM_CMRIVTT'] * np.where(trips.trip_mode == 'TNC_PRM',1,0) * np.where(trips.outbound,1,0)"
,_timeCommuterRailTransitInVehicle,"_timeCommuterRailTransitInVehicle + odt_skims['KNROUT_MIX_CMRIVTT'] * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeCommuterRailTransitInVehicle,"_timeCommuterRailTransitInVehicle + odt_skims['PNRIN_PRM_CMRIVTT'] * np.where(trips.trip_mode == 'PNR_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_timeCommuterRailTransitInVehicle,"_timeCommuterRailTransitInVehicle + odt_skims['PNRIN_MIX_CMRIVTT'] * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_timeCommuterRailTransitInVehicle,"_timeCommuterRailTransitInVehicle + odt_skims['KNRIN_PRM_CMRIVTT'] * np.where(trips.trip_mode == 'KNR_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_timeCommuterRailTransitInVehicle,"_timeCommuterRailTransitInVehicle + odt_skims['KNRIN_MIX_CMRIVTT'] * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_timeCommuterRailTransitInVehicle,"_timeCommuterRailTransitInVehicle + odt_skims['KNRIN_PRM_CMRIVTT'] * np.where(trips.trip_mode == 'TNC_PRM',1,0) * np.where(~trips.outbound,1,0)"
,timeCommuterRailTransitInVehicle,"_timeCommuterRailTransitInVehicle + odt_skims['KNRIN_MIX_CMRIVTT'] * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(~trips.outbound,1,0)"
#,,
,_timeTransitInitialWait,"odt_skims['WALK_LOC_FIRSTWAIT'] * np.where(trips.trip_mode == 'WALK_LOC',1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['WALK_PRM_FIRSTWAIT'] * np.where(trips.trip_mode == 'WALK_PRM',1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['WALK_MIX_FIRSTWAIT'] * np.where(trips.trip_mode == 'WALK_MIX',1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['PNROUT_LOC_FIRSTWAIT'] * np.where(trips.trip_mode == 'PNR_LOC',1,0) * np.where(trips.outbound,1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['PNROUT_PRM_FIRSTWAIT'] * np.where(trips.trip_mode == 'PNR_PRM',1,0) * np.where(trips.outbound,1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['PNROUT_MIX_FIRSTWAIT'] * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['KNROUT_LOC_FIRSTWAIT'] * np.where(trips.trip_mode == 'KNR_LOC',1,0) * np.where(trips.outbound,1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['KNROUT_PRM_FIRSTWAIT'] * np.where(trips.trip_mode == 'KNR_PRM',1,0) * np.where(trips.outbound,1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['KNROUT_MIX_FIRSTWAIT'] * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['KNROUT_LOC_FIRSTWAIT'] * np.where(trips.trip_mode == 'TNC_LOC',1,0) * np.where(trips.outbound,1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['KNROUT_PRM_FIRSTWAIT'] * np.where(trips.trip_mode == 'TNC_PRM',1,0) * np.where(trips.outbound,1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['KNROUT_MIX_FIRSTWAIT'] * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(trips.outbound,1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['PNRIN_LOC_FIRSTWAIT'] * np.where(trips.trip_mode == 'PNR_LOC',1,0) * np.where(~trips.outbound,1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['PNRIN_PRM_FIRSTWAIT'] * np.where(trips.trip_mode == 'PNR_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['PNRIN_MIX_FIRSTWAIT'] * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['KNRIN_LOC_FIRSTWAIT'] * np.where(trips.trip_mode == 'KNR_LOC',1,0) * np.where(~trips.outbound,1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['KNRIN_PRM_FIRSTWAIT'] * np.where(trips.trip_mode == 'KNR_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['KNRIN_MIX_FIRSTWAIT'] * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['KNRIN_LOC_FIRSTWAIT'] * np.where(trips.trip_mode == 'TNC_LOC',1,0) * np.where(~trips.outbound,1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['KNRIN_PRM_FIRSTWAIT'] * np.where(trips.trip_mode == 'TNC_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_timeTransitInitialWait,"_timeTransitInitialWait + odt_skims['KNRIN_MIX_FIRSTWAIT'] * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(~trips.outbound,1,0)"
#,,
,_costFareTransit,"df.transitSubsidyPassDiscount*(odt_skims['WALK_LOC_FARE'])*100 * np.where(trips.trip_mode == 'WALK_LOC',1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*odt_skims['WALK_PRM_FARE']*100 * np.where(trips.trip_mode == 'WALK_PRM',1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*(odt_skims['WALK_MIX_FARE'])*100 * np.where(trips.trip_mode == 'WALK_MIX',1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*(odt_skims['PNROUT_LOC_FARE'])*100 * np.where(trips.trip_mode == 'PNR_LOC',1,0) * np.where(trips.outbound,1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*(odt_skims['PNROUT_PRM_FARE'])*100 * np.where(trips.trip_mode == 'PNR_PRM',1,0) * np.where(trips.outbound,1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*(odt_skims['PNROUT_MIX_FARE'])*100 * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*(odt_skims['KNROUT_LOC_FARE'])*100 * np.where(trips.trip_mode == 'KNR_LOC',1,0) * np.where(trips.outbound,1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*(odt_skims['KNROUT_PRM_FARE'])*100 * np.where(trips.trip_mode == 'KNR_PRM',1,0) * np.where(trips.outbound,1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*(odt_skims['KNROUT_MIX_FARE'])*100 * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*(odt_skims['KNROUT_LOC_FARE'])*100 * np.where(trips.trip_mode == 'TNC_LOC',1,0) * np.where(trips.outbound,1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*(odt_skims['KNROUT_PRM_FARE'])*100 * np.where(trips.trip_mode == 'TNC_PRM',1,0) * np.where(trips.outbound,1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*(odt_skims['KNROUT_MIX_FARE'])*100 * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(trips.outbound,1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*(odt_skims['PNRIN_LOC_FARE'])*100 * np.where(trips.trip_mode == 'PNR_LOC',1,0) * np.where(~trips.outbound,1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*(odt_skims['PNRIN_PRM_FARE'])*100 * np.where(trips.trip_mode == 'PNR_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*(odt_skims['PNRIN_MIX_FARE'])*100 * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*(odt_skims['KNRIN_LOC_FARE'])*100 * np.where(trips.trip_mode == 'KNR_LOC',1,0) * np.where(~trips.outbound,1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*(odt_skims['KNRIN_PRM_FARE'])*100 * np.where(trips.trip_mode == 'KNR_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*(odt_skims['KNRIN_MIX_FARE'])*100 * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*(odt_skims['KNRIN_LOC_FARE'])*100 * np.where(trips.trip_mode == 'TNC_LOC',1,0) * np.where(~trips.outbound,1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*(odt_skims['KNRIN_PRM_FARE'])*100 * np.where(trips.trip_mode == 'TNC_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_costFareTransit,"_costFareTransit + df.transitSubsidyPassDiscount*(odt_skims['KNRIN_MIX_FARE'])*100 * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(~trips.outbound,1,0)"
,costFareTransit,"_costFareTransit + np.where(df.nev_available, nevCost, np.where(df.microtransit_available, microtransitCost, 0)) * np.where(trips.trip_mode == 'TNC_SHARED',1,0)"
#,,
,_transfersTransit,"odt_skims['WALK_LOC_XFERS'] * np.where(trips.trip_mode == 'WALK_LOC',1,0)"
,_transfersTransit,"_transfersTransit + odt_skims['WALK_PRM_XFERS'] * np.where(trips.trip_mode == 'WALK_PRM',1,0)"
,_transfersTransit,"_transfersTransit + odt_skims['WALK_MIX_XFERS'] * np.where(trips.trip_mode == 'WALK_MIX',1,0)"
,_transfersTransit,"_transfersTransit + odt_skims['PNROUT_LOC_XFERS'] * np.where(trips.trip_mode == 'PNR_LOC',1,0) * np.where(trips.outbound,1,0)"
,_transfersTransit,"_transfersTransit + odt_skims['PNROUT_PRM_XFERS'] * np.where(trips.trip_mode == 'PNR_PRM',1,0) * np.where(trips.outbound,1,0)"
,_transfersTransit,"_transfersTransit + odt_skims['PNROUT_MIX_XFERS'] * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_transfersTransit,"_transfersTransit + odt_skims['KNROUT_LOC_XFERS'] * np.where(trips.trip_mode == 'KNR_LOC',1,0) * np.where(trips.outbound,1,0)"
,_transfersTransit,"_transfersTransit + odt_skims['KNROUT_PRM_XFERS'] * np.where(trips.trip_mode == 'KNR_PRM',1,0) * np.where(trips.outbound,1,0)"
,_transfersTransit,"_transfersTransit + odt_skims['KNROUT_MIX_XFERS'] * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_transfersTransit,"_transfersTransit + odt_skims['KNROUT_LOC_XFERS'] * np.where(trips.trip_mode == 'TNC_LOC',1,0) * np.where(trips.outbound,1,0)"
,_transfersTransit,"_transfersTransit + odt_skims['KNROUT_PRM_XFERS'] * np.where(trips.trip_mode == 'TNC_PRM',1,0) * np.where(trips.outbound,1,0)"
,_transfersTransit,"_transfersTransit + odt_skims['KNROUT_MIX_XFERS'] * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(trips.outbound,1,0)"
,_transfersTransit,"_transfersTransit + odt_skims['PNRIN_LOC_XFERS'] * np.where(trips.trip_mode == 'PNR_LOC',1,0) * np.where(~trips.outbound,1,0)"
,_transfersTransit,"_transfersTransit + odt_skims['PNRIN_PRM_XFERS'] * np.where(trips.trip_mode == 'PNR_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_transfersTransit,"_transfersTransit + odt_skims['PNRIN_MIX_XFERS'] * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_transfersTransit,"_transfersTransit + odt_skims['KNRIN_LOC_XFERS'] * np.where(trips.trip_mode == 'KNR_LOC',1,0) * np.where(~trips.outbound,1,0)"
,_transfersTransit,"_transfersTransit + odt_skims['KNRIN_PRM_XFERS'] * np.where(trips.trip_mode == 'KNR_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_transfersTransit,"_transfersTransit + odt_skims['KNRIN_MIX_XFERS'] * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_transfersTransit,"_transfersTransit + odt_skims['KNRIN_LOC_XFERS'] * np.where(trips.trip_mode == 'TNC_LOC',1,0) * np.where(~trips.outbound,1,0)"
,_transfersTransit,"_transfersTransit + odt_skims['KNRIN_PRM_XFERS'] * np.where(trips.trip_mode == 'TNC_PRM',1,0) * np.where(~trips.outbound,1,0)"
,transfersTransit,"_transfersTransit + odt_skims['KNRIN_MIX_XFERS'] * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(~trips.outbound,1,0)"
#bikeskim,,
,timeBike,"od_skims['BIKE_TIME'] * np.where(trips.trip_mode == 'BIKE',1,0)"
#,,
,_time_transit_wait,"_timeTransitInitialWait"
,_time_transit_wait,"_time_transit_wait + odt_skims['WALK_LOC_XFERWAIT'] * np.where(trips.trip_mode == 'WALK_LOC',1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['WALK_PRM_XFERWAIT'] * np.where(trips.trip_mode == 'WALK_PRM',1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['WALK_MIX_XFERWAIT'] * np.where(trips.trip_mode == 'WALK_MIX',1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['PNROUT_LOC_XFERWAIT'] * np.where(trips.trip_mode == 'PNR_LOC',1,0) * np.where(trips.outbound,1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['PNROUT_PRM_XFERWAIT'] * np.where(trips.trip_mode == 'PNR_PRM',1,0) * np.where(trips.outbound,1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['PNROUT_MIX_XFERWAIT'] * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['KNROUT_LOC_XFERWAIT'] * np.where(trips.trip_mode == 'KNR_LOC',1,0) * np.where(trips.outbound,1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['KNROUT_PRM_XFERWAIT'] * np.where(trips.trip_mode == 'KNR_PRM',1,0) * np.where(trips.outbound,1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['KNROUT_MIX_XFERWAIT'] * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(trips.outbound,1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['KNROUT_LOC_XFERWAIT'] * np.where(trips.trip_mode == 'TNC_LOC',1,0) * np.where(trips.outbound,1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['KNROUT_PRM_XFERWAIT'] * np.where(trips.trip_mode == 'TNC_PRM',1,0) * np.where(trips.outbound,1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['KNROUT_MIX_XFERWAIT'] * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(trips.outbound,1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['PNRIN_LOC_XFERWAIT'] * np.where(trips.trip_mode == 'PNR_LOC',1,0) * np.where(~trips.outbound,1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['PNRIN_PRM_XFERWAIT'] * np.where(trips.trip_mode == 'PNR_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['PNRIN_MIX_XFERWAIT'] * np.where(trips.trip_mode == 'PNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['KNRIN_LOC_XFERWAIT'] * np.where(trips.trip_mode == 'KNR_LOC',1,0) * np.where(~trips.outbound,1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['KNRIN_PRM_XFERWAIT'] * np.where(trips.trip_mode == 'KNR_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['KNRIN_MIX_XFERWAIT'] * np.where(trips.trip_mode == 'KNR_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['KNRIN_LOC_XFERWAIT'] * np.where(trips.trip_mode == 'TNC_LOC',1,0) * np.where(~trips.outbound,1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['KNRIN_PRM_XFERWAIT'] * np.where(trips.trip_mode == 'TNC_PRM',1,0) * np.where(~trips.outbound,1,0)"
,_time_transit_wait,"_time_transit_wait + odt_skims['KNRIN_MIX_XFERWAIT'] * np.where(trips.trip_mode == 'TNC_MIX',1,0) * np.where(~trips.outbound,1,0)"
,_time_transit_wait,"_time_transit_wait + 10 * np.where(trips.trip_mode == 'SCH_BUS',1,0)"
,time_transit_wait,"_time_transit_wait + trips.time_nev_mt_wait"
#,,
,time_total,df.time_walk + timeBike + df.time_mm + timeDrive + df.time_wait_drive + df.time_transit_drive + time_transit_wait + timeTransitInVehicle + df.time_drive_terminal
,cost_total,df.costOperatingDrive+costTollDrive+costFareTransit+df.cost_parking+df.cost_fare_drive+df.cost_fare_mm
#,,
,value_of_time_category_id,"np.where(vot1,1,np.where(vot2,2,3))"
#,,
,trip_veh_body,"reindex(tours.selected_vehicle.str.split('_').str[0], trips.tour_id)"
,_trip_veh_age,"reindex(tours.selected_vehicle.str.split('_').str[1], trips.tour_id)"
,_trip_veh_age,"_trip_veh_age.replace('hh', -9)"
,trip_veh_age,"_trip_veh_age.fillna(-9)"
,trip_veh_fueltype,"reindex(tours.selected_vehicle.str.split('_').str[2], trips.tour_id)"
#,,
,origin_purpose," ""null"""
,origin_purpose,"np.where(trips.trip_count == 1, 'home', origin_purpose)"
,origin_purpose,"np.where(trips.trip_count == 1 & (trips.primary_purpose == 'atwork'), 'work', origin_purpose)"
,origin_purpose,"np.where((trips.trip_count > 1) & (trips.trip_num==1) & (trips.outbound), 'home', origin_purpose)"
,origin_purpose,"np.where(((trips.trip_count > 1) & (trips.trip_num>1)) | ((trips.trip_count > 1) & (trips.trip_num==1) & ~(trips.outbound)), trips['purpose'].shift(1), origin_purpose)"
#Flexible fleet access/egress availability
,microtransit_access_available_out,trips.microtransit_local_access_available_out | trips.microtransit_prm_access_available_out | trips.microtransit_mix_access_available_out
,microtransit_egress_available_out,trips.microtransit_local_egress_available_out | trips.microtransit_prm_egress_available_out | trips.microtransit_mix_egress_available_out
,microtransit_access_available_in,trips.microtransit_local_access_available_in | trips.microtransit_prm_access_available_in | trips.microtransit_mix_access_available_in
,microtransit_egress_available_in,trips.microtransit_local_egress_available_in | trips.microtransit_prm_egress_available_in | trips.microtransit_mix_egress_available_in
,nev_access_available_out,trips.nev_local_access_available_out | trips.nev_prm_access_available_out | trips.nev_mix_access_available_out
,nev_egress_available_out,trips.nev_local_egress_available_out | trips.nev_prm_egress_available_out | trips.nev_mix_egress_available_out
,nev_access_available_in,trips.nev_local_access_available_in | trips.nev_prm_access_available_in | trips.nev_mix_access_available_in
,nev_egress_available_in,trips.nev_local_egress_available_in | trips.nev_prm_egress_available_in | trips.nev_mix_egress_available_in
#Flexible fleet boardings,,
,_walk_to_transit_trip,"(trips.trip_mode == 'WALK_LOC') | (trips.trip_mode == 'WALK_PRM') | (trips.trip_mode == 'WALK_MIX')"
,_pnr_to_transit_trip,"(trips.trip_mode == 'PNR_LOC') | (trips.trip_mode == 'PNR_PRM') | (trips.trip_mode == 'PNR_MIX')"
,_knr_to_transit_trip,"(trips.trip_mode == 'KNR_LOC') | (trips.trip_mode == 'KNR_PRM') | (trips.trip_mode == 'KNR_MIX')"
,_tnc_to_transit_trip,"(trips.trip_mode == 'TNC_LOC') | (trips.trip_mode == 'TNC_PRM') | (trips.trip_mode == 'TNC_MIX')"
,_transit_trip,"_walk_to_transit_trip | _pnr_to_transit_trip | _knr_to_transit_trip | _tnc_to_transit_trip"
,microtransit_boarding,"trips.microtransit_available & (trips.trip_mode == 'TNC_SHARED')"
,microtransit_outbound_access_boarding,"trips.outbound & trips.microtransit_access_available_out & _tnc_to_transit_trip"
,microtransit_outbound_egress_boarding,"trips.outbound & trips.microtransit_egress_available_out & _transit_trip"
,microtransit_inbound_access_boarding,"trips.inbound & trips.microtransit_access_available_in & _transit_trip"
,microtransit_inbound_egress_boarding,"trips.inbound & trips.microtransit_egress_available_in & _tnc_to_transit_trip"
,nev_boarding,"trips.nev_available & (trips.trip_mode == 'TNC_SHARED')"
,nev_outbound_access_boarding,"trips.outbound & trips.nev_access_available_out & _tnc_to_transit_trip"
,nev_outbound_egress_boarding,"trips.outbound & trips.nev_egress_available_out & _transit_trip"
,nev_inbound_access_boarding,"trips.inbound & trips.nev_access_available_in & _transit_trip"
,nev_inbound_egress_boarding,"trips.inbound & trips.nev_egress_available_in & _tnc_to_transit_trip"
