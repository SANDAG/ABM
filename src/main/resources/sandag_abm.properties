#SANDAG ABM Properties
#Software Version
version = version_14_3_0
# geography ID
geographyID = 1
#############################################################################################################################################################################
#
# CLUSTER PROPERTIES: MODIFY WHEN CHANGING CLUSTER CONFIGURATION OR MOVING TO NEW CLUSTER.
#
#############################################################################################################################################################################
RunModel.MatrixServerAddress = ${matrix.server.host}
RunModel.MatrixServerPort = 1191
RunModel.HouseholdServerAddress = ${household.server.host}
RunModel.HouseholdServerPort = 1129

#############################################################################################################################################################################
#
# RUN PROPERTIES:  MODEL COMPONENT SWITCHES
#
#############################################################################################################################################################################
#set sample rates
sample_rates = 0.25,0.5,1.0

#highway assignment convergence criteria
convergence = 0.0005

#set warm up inputs
RunModel.useLocalDrive = false
RunModel.skipInitialization = true
RunModel.deleteAllMatrices = true
RunModel.skip4Ds = true
RunModel.skipInputChecker = true
RunModel.skipCopyWarmupTripTables = true
RunModel.skipCopyBikeLogsum = true
RunModel.skipShadowPricing = false
RunModel.skipBikeLogsums = true
#always create walk logsum (walk to TAP file); modification from GUI disallowed
RunModel.skipCopyWalkImpedance = true
RunModel.skipWalkLogsums = true

#build networks
RunModel.skipBuildNetwork = true

# start looping
# set startFromIteration to 4 if only want
# to run final hwy and transit steps
RunModel.startFromIteration = 1
RunModel.skipHighwayAssignment = true,true,true
RunModel.skipTransitConnector = false,true,true
RunModel.skipTransitSkimming = true,true,true
RunModel.skipTransponderExport = true,true,true
RunModel.skipABMPreprocessing = true,true,true
RunModel.skipABMResident = true,true,true
RunModel.skipABMAirport = true,true,true
RunModel.skipABMVisitor = true,true,true
RunModel.skipABMXborderWait = true
RunModel.skipABMXborder = true,true,true
RunModel.skipCTM = true,true,true
RunModel.skipTruck = true,true,true
RunModel.skipTripTableCreation = true,true,true
# end looping

RunModel.skipFinalHighwayAssignment = true
RunModel.skipFinalHighwayAssignmentStochastic = true
RunModel.skipFinalTransitAssignment = true
RunModel.collapseOnOffByRoute = false
RunModel.skipLUZSkimCreation = true
RunModel.skipVisualizer = false
RunModel.skipDataExport = true
RunModel.skipDataLoadRequest = true
RunModel.skipDeleteIntermediateFiles = true
RunModel.MatrixPrecision = 0.0005
# minimual space (MB) on C drive
RunModel.minSpaceOnC = 140

TNC.totalThreads = 10

#############################################################################################################################################################################
#
# LOGGING PROPERTIES: USE FOR TRACING HOUSEHOLDS OR AGENTS THROUGH SIMULATION.
#
#  Note that the way that logging works right now, the trace zones also have to be valid transit stops or the code will crash.  Check the skims to make sure they exist.
#  Turn off trace debugging in routine model runs to speed things up (comment out Debug.Trace.HouseholdIdList)
#
#############################################################################################################################################################################
# Resident models
Trace = false
#Trace.otaz = 1638
#Trace.dtaz = 2447
Trace.otaz = 
Trace.dtaz = 
Seek = false
Process.Debug.HHs.Only = false
Debug.Trace.HouseholdIdList = 

# Internal-External models
internalExternal.seek = false
internalExternal.trace = 50

# Cross-Border models
crossBorder.seek = false
# trace by tourId
crossBorder.trace = 12

# Visitor models
visitor.seek = false
#trace by tourId
#visitor.trace = 742
visitor.trace = 742

# Special event models
specialEvent.seek = false
specialEvent.trace = 5855

# Trace TransCAD trip table creation by TAZ (to/from); only applies to SD resident model
tripTable.trace = 4384

RunModel.LogResults = true

#############################################################################################################################################################################
# PATH PROPERTIES:  MODIFY AS NEEDED WHEN COPY RELEASE TO A LOCAL RUN FOLDER
#############################################################################################################################################################################
Project.Directory = %project.folder%/
generic.path = %project.folder%/input/
scenario.path = %project.folder%/
skims.path = %project.folder%/output/
uec.path = %project.folder%/uec/
report.path = %project.folder%/report/

# Visitor model is run using Java 7 Fork\Join Framework.  Parallelism controls number of simultaneous threads.  Can increase if more processors.
# 5 threads provided optimum runtimes on a 6 core, 24 thread machine with 128GB of RAM.
visitor.run.concurrent = true
visitor.concurrent.parallelism = 5

#############################################################################################################################################################################
#
# SCENARIO PROPERTIES: MODIFY WHEN RUNNING NEW SCENARIO, IF NECESSARY
#
#############################################################################################################################################################################
# MGRA data file: this token is referred to in many UECs
mgra.socec.file = input/mgra15_based_input2019.csv

# scenario year
scenarioYear = 2019



# Truck model settings:
truck.FFyear = 2019

# Destination zones for the transponder accessibility calculator
transponder.destinations = 4027,2563,2258
traffic.sla_limit = 3

# Number of zones where 4996 is the default, but may be changed by Land Use Converter Tool zone split
zones.count = 4947




#############################################################################################################################################################################
#
# INPUT PROPERTIES
#
#############################################################################################################################################################################
#PopSyn Inputs
PopulationSynthesizer.InputToCTRAMP.HouseholdFile = input/households.csv
PopulationSynthesizer.InputToCTRAMP.PersonFile = input/persons.csv
PopulationSynthesizer.OccupCodes = input/pecas_occ_occsoc_acs.csv
PopulationSynthesizer.IndustryCodes = input/activity_code_indcen_acs.csv
#
# The military industry ranges are used to recode military occupation.  This is
# necessary because military workers identify themselves as non-military occupations.
# The models need to be consistent with PECAS, where all military workers are in
# the military occupation category 56.
PopulationSynthesizer.MilitaryIndustryRange = 9670,9870

# auxiliary inputs, these are scenario-specific
taz.driveaccess.taps.file = input/accessam.csv
tap.ptype.file = input/tap.ptype
taz.parkingtype.file = input/zone.park
taz.terminal.time.file = input/zone.term
maz.tap.tapLines = output/tapLines.csv

# transit stop attribute file
transit.stop.file = input/trstop.csv

#####################################################################################
# IE Model Settings (run as part of CT-RAMP)
#####################################################################################

RunModel.InternalExternal = true

ie.uec.file = InternalExternalTripChoice.xls
ie.data.page = 0
ie.model.page = 1
ie.logsum.distance.coeff = -0.05
external.tazs = 1,2,3,4,5,6,7,8,9,10,11,12


internalExternal.dc.uec.file = InternalExternalDestinationChoice.xls
internalExternal.dc.uec.data.page = 0
internalExternal.dc.uec.model.page = 1
internalExternal.dc.uec.alts.file = InternalExternalDestinationChoiceAlternatives.csv

internalExternal.tour.tod.file = input/internalExternal_tourTOD.csv

internalExternal.trip.mc.uec.file = InternalExternalTripModeChoice.xls
internalExternal.trip.mc.data.page = 0
internalExternal.trip.mc.model.page = 1

internalExternal.trip.output.file = output/internalExternalTrips.csv

internalExternal.results.autoTripMatrix = output/autoInternalExternalTrips
internalExternal.results.nMotTripMatrix = output/nmotInternalExternalTrips
internalExternal.results.tranTripMatrix = output/tranInternalExternalTrips
internalExternal.results.othrTripMatrix = output/othrInternalExternalTrips


#####################################################################################
# Truck Model Settings
#####################################################################################
truck.DFyear = 2016,2019,2020,2023,2025,2026,2029,2030,2032,2035,2040,2050
truck.luOverRide = "False"

#####################################################################################
# Commercial Vehicle Model Settings
#####################################################################################
#scale factor to use in cvm trip generation. Also, used during demand import to factor-in demand accordingly
cvm.scale_factor = 1
#scale factors by vehicle (light, medium, and heavy) and time of day (ea,am,md,pm,ev) - used to boost cvm demand
#light vehicles
cvm.scale_light = 1,2,3.5,2,1
#medium vehicles
cvm.scale_medium = 1,1,1,1,1
#heavy vehicles
cvm.scale_heavy = 1,1,1,1,1
#cvm vehicle shares representing portions of the cvm vehicle trips that go to light-heavy trucks.
#share value should be between 0 and 1. 0 representing none will go to light-heavy truck and 1 means all will go.
cvm.share.light = 0.04
cvm.share.medium = 0.64
cvm.share.heavy = 0

#################################################################
# Report Section
#################################################################
Report.exportData = True
Report.iteration = 3
Report.tables = taztotap,indivtrips,jointtrips,airporttripsSAN,airporttripsCBX,cbtrips,visitortours,visitortrips,ietrip,commtrip
#aggregate trips eetrip, eitrip, and trucktrip are exported in Python, always
#Report.writeTransitIVT = True
#####################################################################################
# Trip Table Settings
#####################################################################################
# occupancies needed for trip table creation
occ3plus.purpose.Work = 3.34
occ3plus.purpose.University = 3.34
occ3plus.purpose.School = 3.34
occ3plus.purpose.Escort = 3.34
occ3plus.purpose.Shop = 3.34
occ3plus.purpose.Maintenance = 3.34
occ3plus.purpose.EatingOut = 3.34
occ3plus.purpose.Visiting = 3.34
occ3plus.purpose.Discretionary = 3.34
occ3plus.purpose.WorkBased = 3.34

#################################################################
# Active Transportation Model Settings
# updated 4/2/2014 wsu
#################################################################
active.node.file = %project.folder%/input/SANDAG_Bike_NODE.dbf
active.node.id = NodeLev_ID
active.node.fieldnames = mgra,taz,x,y,tap,signalized
active.node.columns = MGRA,TAZ,XCOORD,YCOORD,TAP,Signal
active.edge.file = %project.folder%/input/SANDAG_Bike_NET.dbf
active.edge.anode = A
active.edge.bnode = B
active.edge.directional = false
active.edge.fieldnames = functionalClass,distance,gain,bikeClass,lanes,cycleTrack,bikeBlvd,roadsegid
active.edge.columns.ab = Func_Class,Distance,AB_Gain,ABBikeClas,AB_Lanes,Bike2Sep,Bike3Blvd,ROADSEGID
active.edge.columns.ba = Func_Class,Distance,BA_Gain,BABikeClas,BA_Lanes,Bike2Sep,Bike3Blvd,ROADSEGID
active.edge.centroid.field = functionalClass
active.edge.centroid.value = 10
active.edge.autospermitted.field = functionalClass
active.edge.autospermitted.values = 1,2,3,4,5,6,7
# distance bins for control of path sampling
active.sample.distance.breaks = 99
# minimum path sizes of alternative lists for each distance bin
active.sample.pathsizes = 2
# minimum count of samples for each distance bin
active.sample.count.min = 10
# maximum count of samples for each distance bin
active.sample.count.max = 100
# scale of random cost for each sampling iteration where random cost = cost + scale * unif(0,1) * distance
active.sample.random.scale.coef = 0.5
active.sample.random.scale.link = 0.7
active.sample.random.seeded = true
active.sample.maxcost = 998
active.maxdist.walk.mgra = 3.0
active.maxdist.walk.tap = 1.0
active.maxdist.bike.taz = 20.7
active.maxdist.bike.mgra = 2.07
active.maxdist.micromobility.mgra = 3.0
active.maxdist.micromobility.tap = 1.0
active.maxdist.microtransit.mgra = 3.0
active.maxdist.microtransit.tap = 3.0
active.output.bike = %project.folder%/output/
active.output.walk = %project.folder%/output/
active.coef.distcla0 = 0.82797
active.coef.distcla1 = 0.33582
active.coef.distcla2 = 0.52496
active.coef.distcla3 = 0.82797
active.coef.dartne2 = 1.01325
active.coef.dwrongwy = 3.32443
active.coef.dcyctrac = 0.40916
active.coef.dbikblvd = 0.331
active.coef.nonscenic = 0.3
active.coef.gain = 0.015
active.coef.turn = 0.083
active.coef.signals = 0.04
active.coef.unlfrma = 0.36
active.coef.unlfrmi = 0.15
active.coef.untoma = 0.48
active.coef.untomi = 0.1
active.coef.gain.walk = 0.034

active.walk.minutes.per.mile = 20
active.bike.minutes.per.mile = 5.7971

active.micromobility.speed = 15
active.micromobility.variableCost = 0.16
active.micromobility.fixedCost = 0.81
active.micromobility.rentalTime = 1
active.micromobility.constant = 60
active.micromobility.vot = 15

micromobility.uec.file = MicromobilityChoice.xls
micromobility.data.page = 0
micromobility.model.page = 1

active.microtransit.speed = 17
active.microtransit.variableCost = 0.0
active.microtransit.fixedCost = 2.03
active.microtransit.waitTime = 4.0
active.microtransit.accessTime = 0.0
active.microtransit.constant = 120
active.microtransit.notAvailable = 999

active.microtransit.tap.file = input/mobilityHubTaps.csv
active.microtransit.mgra.file = input/mobilityHubMGRAs.csv

#active.trace.origins.taz = 500, 1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500
#active.trace.origins.mgra = 1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 9000, 10000, 11000, 12000, 13000, 14000, 15000, 16000, 17000, 18000, 19000, 20000
#active.trace.origins.tap = 1, 3, 5, 7, 8, 9, 15
#active.trace.exclusive =  false
#active.debug.origin = 200003500
#active.debug.destination = 200003601

active.trace.outputassignmentpaths = false

path.choice.uec.spreadsheet = %project.folder%/uec/BikeTripPathChoice.xls
path.choice.uec.model.sheet = 1
path.choice.uec.data.sheet = 0
path.choice.max.path.count = 200
btpc.alts.file = bike_path_alts.csv
active.logsum.matrix.file.bike.taz = bikeTazLogsum.csv
active.logsum.matrix.file.bike.mgra = bikeMgraLogsum.csv
active.logsum.matrix.file.walk.mgra = walkMgraEquivMinutes.csv
active.logsum.matrix.file.walk.mgratap = walkMgraTapEquivMinutes.csv

active.bike.write.derived.network = true
active.bike.derived.network.edges = derivedBikeEdges.csv
active.bike.derived.network.nodes = derivedBikeNodes.csv
active.bike.derived.network.traversals = derivedBikeTraversals.csv

active.assignment.file.bike = bikeAssignmentResults.csv
active.micromobility.file.walk.mgra = microMgraEquivMinutes.csv
active.micromobility.file.walk.mgratap = microMgraTapEquivMinutes.csv

AtTransitConsistency.xThreshold = 1.0
AtTransitConsistency.yThreshold = 1.0

#####################################################################################
# SUMMIT Settings
#####################################################################################
summit.output.directory = output/
# Purposes (which correspond to SUMMIT files) are as follows:
summit.purpose.Work = 1
summit.purpose.University = 2
summit.purpose.School = 3
summit.purpose.Escort = 4
summit.purpose.Shop = 4
summit.purpose.Maintenance = 4
summit.purpose.EatingOut = 5
summit.purpose.Visiting = 5
summit.purpose.Discretionary = 5
summit.purpose.WorkBased = 6

summit.filename.1 = Work
summit.filename.2 = University
summit.filename.3 = School
summit.filename.4 = Maintenance
summit.filename.5 = Discretionary
summit.filename.6 = Workbased

summit.ivt.file.1 = -0.016
summit.ivt.file.2 = -0.016
summit.ivt.file.3 = -0.01
summit.ivt.file.4 = -0.017
summit.ivt.file.5 = -0.015
summit.ivt.file.6 = -0.032

summit.modes = 26
# 1=wt,2=dt         1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26
summit.mode.array = 0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,0

summit.upperEA = 3
summit.upperAM = 9
summit.upperMD = 22
summit.upperPM = 29

#################################################################
# TAPS Creation Settings
# updated 4/28/2015 ymm
#################################################################
taps.formal.premium.maxDist = 10.0
taps.formal.express.maxDist = 4.0
taps.formal.local.maxDist = 4.0
taps.informal.premium.maxDist = 4.0
taps.informal.express.maxDist = 2.0
taps.informal.local.maxDist = 2.0

taps.premium.modes = 4,5,6,7
taps.express.modes = 8,9
taps.local.modes = 10

taps.skim = traffic_skims_AM.omx
taps.skim.dist = AM_SOV_NT_M_DIST
taps.skim.time = AM_SOV_NT_M_TIME

#################################################################
# Military Adjustment Section
# updated 4/26/2016 Wu Sun
#################################################################
RunModel.militaryCtmAdjustment = true

#####################################################################################
# Special Event Model Settings
# Wu Sun 5/15/2017
#####################################################################################
specialEvent.event.file = input/specialEvent_eventData.csv

specialEvent.partySize.file = input/specialEvent_partySize.csv
specialEvent.income.file = input/specialEvent_income.csv

specialEvent.dc.uec.file = SpecialEventOriginChoice.xls
specialEvent.dc.data.page = 0
specialEvent.dc.model.page = 1
specialEvent.dc.size.page = 2

specialEvent.saveUtilsAndProbs = false

specialEvent.trip.mc.uec.file = SpecialEventTripModeChoice.xls
specialEvent.trip.mc.data.page = 0
specialEvent.trip.mc.model.page = 1

specialEvent.tour.output.file = output/specialEventTours.csv
specialEvent.trip.output.file = output/specialEventTrips.csv

specialEvent.results.autoTripMatrix = output/autoSpecialEventTrips
specialEvent.results.nMotTripMatrix = output/nmotSpecialEventTrips
specialEvent.results.tranTripMatrix = output/tranSpecialEventTrips
specialEvent.results.othrTripMatrix = output/othrSpecialEventTrips

#####################################################################################
# Transit Shed Properties wsu 8/7/18
#####################################################################################
RunModel.skipTransitShed = true
#transit access threshold (in minutes, must be integer)
transitShed.threshold = 30
#TOD to use in Transit Shed analysis-EA, AM, MD, PM, and EV
transitShed.TOD = AM
#Transit Shed time components (walk to transit). Options: walkAccTime,walkEgrTime,walkAuxTime,1stWaitTime,xferWaitTime,IVTime
transitShed.walkTransitTimeComponents = walkAccTime,walkEgrTime,walkAuxTime,1stWaitTime,xferWaitTime,IVTime
#Transit Shed time components (drive to transit). Options: driveAccTime,walkEgrTime,walkAuxTime,1stWaitTime,xferWaitTime,IVTime
transitShed.driveTransitTimeComponents = drvAccTime,walkEgrTime,walkAuxTime,1stWaitTime,xferWaitTime,IVTime

#####################################################################################
# Smart Signal Properties wsu 8/22/18
#####################################################################################
smartSignal.factor.LC = 1
smartSignal.factor.MA = 1
smartSignal.factor.PA = 1

#####################################################################################
#####################################################################################
# Transit Tier 1 EMME Link Name zou 5/7/20
#####################################################################################
transit.newMode = TIER 1 RAIL
transit.newMode.route = 581,582,583

#####################################################################################
# ATDM Properties wsu 8/22/18
#####################################################################################
atdm.factor = 1
#####################################################################################
# Transit PCE VEH Conversion cliu 8/19/20
#####################################################################################
transit.bus.pceveh = 3.0
#####################################################################################
# Local Drive Run Settings wsu 1/19/19
#####################################################################################
RunModel.FileMask.Download = output,report,sql,logFiles
RunModel.FileMask.Upload = application,bin,input_truck,uec,output\iter*,output\*_1.csv,output\*_2.csv
#####################################################################################
# Visualizer Settings (run once after feedback loops)
#####################################################################################
visualizer.reference.path = T:\RTP\2021RP\2021rp_final\abm_runs\2020\input\mgra13_based_input2020.csv
visualizer.output = SANDAG_Dashboard
visualizer.reference.label = REFERENCE
visualizer.build.label = SDABM

#####################################################################################
# add year specific vehicle class toll factor wsu 6/18/20
#####################################################################################
vehicle.class.toll.factor = vehicle_class_toll_factors.csv
vehicle.class.toll.factor.path = input/vehicle_class_toll_factors.csv
RunModel.skipExternalExternal = true,true,true
SavedFrom = Emme Modeller properties writer Process ID 26024
SavedLast = May-22-2023 10:29:04
active.ebike.ownership = 0.07
