
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://sandag.github.io/abm/running.html">
      
      
        <link rel="prev" href="design/report/report.html">
      
      
        <link rel="next" href="inputs.html">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.18">
    
    
      
        <title>Installing and Running - SANDAG ABM3</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.66ac8b77.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installing-and-running-abm3" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="SANDAG ABM3" class="md-header__button md-logo" aria-label="SANDAG ABM3" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SANDAG ABM3
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Installing and Running
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="grey"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/SANDAG/ABM" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="index.html" class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="design/design.html" class="md-tabs__link">
          
  
    
  
  Model Design

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="running.html" class="md-tabs__link">
        
  
    
  
  Installing and Running

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="inputs.html" class="md-tabs__link">
          
  
    
  
  Model Inputs and Outputs

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="application/applying.html" class="md-tabs__link">
          
  
    
  
  Applying ABM3

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="calib_valid/calib_overview.html" class="md-tabs__link">
          
  
    
  
  Calibration and Validation

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="release-notes.html" class="md-tabs__link">
          
  
    
  
  About

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="SANDAG ABM3" class="md-nav__button md-logo" aria-label="SANDAG ABM3" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    SANDAG ABM3
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/SANDAG/ABM" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Model Design
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Model Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="design/design.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overall Design
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="design/init/initialization.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Initialization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="design/demand/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Demand
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Demand
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="design/demand/resident.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resident Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="design/demand/crossborder.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Crossborder Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="design/demand/airport.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Airport Ground Access Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="design/demand/visitor.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overnight Visitor Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="design/demand/cvm.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Commercial Vehicle Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="design/demand/external.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    External Models
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="design/supply/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Supply
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Supply
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="design/supply/bike-logsums.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bike Logsums
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="design/supply/walk-skims.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Walk Skims
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="design/supply/network-import-tned.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network Import from TNED
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="design/supply/highway-skims-assign.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Highway Skimming and Assignment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="design/supply/transit-skims-assign.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transit Skimming and Assignment
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="design/report/report.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Report
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Installing and Running
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="running.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Installing and Running
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#system-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      System Requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#software-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Software Requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-abm3" class="md-nav__link">
    <span class="md-ellipsis">
      Installing ABM3
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing ABM3">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-up-the-python-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Setting up the Python Environments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Environment Variables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlcmd" class="md-nav__link">
    <span class="md-ellipsis">
      SQLCMD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-java" class="md-nav__link">
    <span class="md-ellipsis">
      Installing Java
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-an-abm3-scenario" class="md-nav__link">
    <span class="md-ellipsis">
      Creating an ABM3 Scenario
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-abm3" class="md-nav__link">
    <span class="md-ellipsis">
      Running ABM3
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Model Inputs and Outputs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Model Inputs and Outputs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="inputs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inputs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="outputs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Outputs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="reports.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reports
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Applying ABM3
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Applying ABM3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="application/applying.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Application
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="application/population-synthesis.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Population Synthesis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="application/landuse-prep.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Land Use Data Preparation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="application/scenario-manager.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scenario Manager
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="application/ev-rebates.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EV Rebates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="application/flexible-fleets.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flexible Fleets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="application/micromobility.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Micromobility
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="application/network-coding.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network Coding
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Calibration and Validation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Calibration and Validation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="calib_valid/calib_overview.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="calib_valid/calibration.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Calibration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="calib_valid/convergence.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Convergence
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="calib_valid/validation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="release-notes.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="faq.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#system-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      System Requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#software-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Software Requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-abm3" class="md-nav__link">
    <span class="md-ellipsis">
      Installing ABM3
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing ABM3">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-up-the-python-environments" class="md-nav__link">
    <span class="md-ellipsis">
      Setting up the Python Environments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Environment Variables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlcmd" class="md-nav__link">
    <span class="md-ellipsis">
      SQLCMD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-java" class="md-nav__link">
    <span class="md-ellipsis">
      Installing Java
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-an-abm3-scenario" class="md-nav__link">
    <span class="md-ellipsis">
      Creating an ABM3 Scenario
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-abm3" class="md-nav__link">
    <span class="md-ellipsis">
      Running ABM3
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="installing-and-running-abm3">Installing and Running ABM3<a class="headerlink" href="#installing-and-running-abm3" title="Permanent link"> ¶</a></h1>
<p>This page describes how to install and run ABM3, including hardware and software requirements. In general, a powerful server is required to run the model. The main software required for the model includes EMME, Python, and Java. EMME is a commercial transportation modeling platform that must be purchased separately and requires a computer with a Windows operating system. Python is an open-source cross-platform programming language that is the core language of ActivitySim. Java is an open-source programming language required for certain bespoke non-ActivitySim model components. </p>
<h2 id="system-requirements">System Requirements<a class="headerlink" href="#system-requirements" title="Permanent link"> ¶</a></h2>
<p>ABM3 runs on a Microsoft Windows workstation or server, with the minimum and recommended system specification as follows:</p>
<p>Minimum specification:</p>
<ul>
<li>
<p>Operating System: 64-bit Windows 7, 64-bit Windows 8 (8.1), 64-bit Windows 10, 64-bit Windows Server 2019</p>
</li>
<li>
<p>Processor: 24-core CPU processor</p>
</li>
<li>
<p>Memory: 1 TB RAM</p>
</li>
<li>
<p>Disk space: 500 GB</p>
</li>
</ul>
<p>Recommended specification:</p>
<ul>
<li>
<p>Operating System: 64-bit Windows 10</p>
</li>
<li>
<p>Processor: Intel CPU Xeon Gold / AMD CPU Threadripper Pro (24+ cores)</p>
</li>
<li>
<p>Memory: 1 TB RAM</p>
</li>
<li>
<p>Disk space: 1000 GB</p>
</li>
</ul>
<p>In general, a higher CPU core count and RAM will result in faster run times as long as ActivitySim is configured to utilize the additional processors and RAM.</p>
<p>Note that the model is unlikely to run on servers that have less than 1 TB of RAM, unless chunking is set to active and in explicit mode (requires an upcoming version of ActivitySim 1.3)</p>
<h2 id="software-requirements">Software Requirements<a class="headerlink" href="#software-requirements" title="Permanent link"> ¶</a></h2>
<p>To run ABM3, there are certain software that should be installed on your workstation including: <a href="https://www.bentley.com/software/emme/">EMME</a>, Python2.7 package manager <a href="https://repo.anaconda.com/archive/">Anaconda2</a>, Python3 package manager <a href="https://www.anaconda.com/">Anaconda3</a>, and <a href="https://www.java.com/en/">Java</a>.</p>
<p>The ABM3 model system is an integrated model that is controlled by and primarily runs in the EMME transportation planning software platform. EMME is used for network assignment, creating transportation skims, and the model&rsquo;s Graphical User Interface (GUI). The software also provides functionality for viewing and editing highway and transit network files and viewing of matrix files. The <a href="https://www.bentley.com/software/connection-client/">Bentley CONNECTION Client</a> software (the license manager for EMME) will need to be logged into and activated prior to running the model.</p>
<p>A Python package manager is software that creates an environment for an instance of Python. ActivitySim and related Python processes in the model are executed in an environment that is setup with a specific version of Python and specific library versions. This ensures that changes outside of the Python environment will not cause errors or change model results, and additionally ensure that the specific version of Python and specific libraries needed by the model do not cause errors or changes to other Python software installations on the server. The libraries needed by ActivitySim extend the base functionality of Python.</p>
<p>Java is required in order to create bicycle logsums, run the taxi/TNC routing model, and run the intra-household autonomous vehicle routing model. The model has been tested against Java version 8 (i.e., 1.8) and is therefore the recommended version to be used when running the SANDAG ABM.</p>
<h2 id="installing-abm3">Installing ABM3<a class="headerlink" href="#installing-abm3" title="Permanent link"> ¶</a></h2>
<h3 id="setting-up-the-python-environments">Setting up the Python Environments<a class="headerlink" href="#setting-up-the-python-environments" title="Permanent link"> ¶</a></h3>
<p>As noted above, the user needs to install Anaconda2 and Anaconda3 on the workstation they intend to install ABM3 on. The Anaconda2 software is utilized to create a Python2-based environment required to interface with a specific version of EMME (4.3.7) whereas Anaconda3 is utilized to create environments to run ActivitySim.</p>
<h4 id="python2-environment">Python2 Environment<a class="headerlink" href="#python2-environment" title="Permanent link"> ¶</a></h4>
<p>After Anaconda installation, the following step is to create the Python2-based environment, which can be done via the following steps:</p>
<ul>
<li>Create a directory called <em>python_virtualenv</em> on the server&rsquo;s local drive and copy in the following files:<ul>
<li><a href="https://github.com/SANDAG/ABM/blob/ABM2_TRUNK/add_python_virtualenv.bat">add_python_virtualenv.bat</a></li>
<li><a href="https://github.com/SANDAG/ABM/blob/ABM2_TRUNK/requirements.txt">requirements.txt</a></li>
</ul>
</li>
<li>Open EMME Shell (likely as Administrator)</li>
<li>Navigate (via <em>cd</em> command) to wherever <em>add_python_virtualenv.bat</em> was copied to</li>
<li>Execute <em>add_python_virtualenv.bat</em></li>
<li>Copy <a href="https://github.com/SANDAG/ABM/blob/ABM3_develop/src/main/emme/python_virtualenv.pth">python_virtualenv.pth</a> to EMME&rsquo;s site-packages directory<ul>
<li>For example, <em>C:\Program Files\INRO\Emme\EMME 4\Emme-4.3.7\Python27\Lib\site-packages</em></li>
</ul>
</li>
</ul>
<p>If installation was succesfully completed, you will have created an environment at e.g., <em>C:\python_virtualenv\abm14_2_0</em>. Ensure relevant libraries were installed under the environment&rsquo;s <em>site-packages</em> directory. </p>
<h4 id="python3-environments">Python3 Environments<a class="headerlink" href="#python3-environments" title="Permanent link"> ¶</a></h4>
<p>The following step is creating two Python3-based Activitysim environments: one for running ActivitySim and the other specificallly for running the ActivitySim-based Commercial Vehicle Model (CVM).</p>
<h5 id="activitysim-environment">ActivitySim Environment<a class="headerlink" href="#activitysim-environment" title="Permanent link"> ¶</a></h5>
<h6 id="sandag-users">SANDAG Users<a class="headerlink" href="#sandag-users" title="Permanent link"> ¶</a></h6>
<p>To create the ActivitySim (<em>asim_baydag</em>) environment:</p>
<ul>
<li>Open Anaconda3 Prompt as Administrator</li>
<li>Execute the following commands:</li>
</ul>
<div class="highlight"><pre><span></span><code>conda update -n base conda
net use T: \\sandag.org\transdata
cd T:\ABM\dev\ABM3\src\asim\scripts
T:
conda env create --file=environment.yml -n asim_baydag
conda activate asim_baydag
pip install azure-identity
pip install azure-storage-blob
cd T:/ABM/dev/ActivitySim
pip install –e .
</code></pre></div>
<h6 id="external-users">External Users<a class="headerlink" href="#external-users" title="Permanent link"> ¶</a></h6>
<p>To create the ActivitySim (<em>asim_baydag</em>) environment, first, change directories using <code>cd /d</code> to the <em>conda-environments</em> folder under the ActivtySim source code directory. As of June 2024, this directory may be cloned from the <em>BayDAG_estimation</em> branch located on <a href="https://github.com/SANDAG/activitysim/tree/BayDAG_estimation">SANDAG&rsquo;s forked version of ActivitySim</a>. The <em>conda-environments</em> folder in this directory contains a number of yaml files that may be used to install the environment. Users may use the following command to install the AcitvitySim environment along with SANDAG&rsquo;s version of AcitivtySim under the <em>asim_baydag</em> name:</p>
<p><code>conda env create --file=activitysim-dev.yml -n asim_baydag</code></p>
<p>After installing the environment, users may confirm successful installation by activating it using:</p>
<p><code>conda activate asim_baydag</code></p>
<h5 id="cvm-activitysim-environment">CVM ActivitySim Environment<a class="headerlink" href="#cvm-activitysim-environment" title="Permanent link"> ¶</a></h5>
<h6 id="sandag-users_1">SANDAG Users<a class="headerlink" href="#sandag-users_1" title="Permanent link"> ¶</a></h6>
<p>To create the ActivitySim CVM environment:</p>
<ul>
<li>Open Anaconda3 Prompt as Administrator</li>
<li>Execute the following commands:</li>
</ul>
<div class="highlight"><pre><span></span><code>cd T:\ABM\dev\CVM
T:
conda env create -p {path to Anaconda3}/envs/asim_sandag_cvm --file activitysim/conda-environments/activitysim-dev-base.yml
conda activate asim_sandag_cvm
pip install -e ./sharrow
pip install -e ./activitysim
</code></pre></div>
<p>Note: On servers, {path to anaconda3} could be e.g., <code>C:/ProgramData/Anaconda3/</code> or <code>C:/Anaconda3</code></p>
<h6 id="external-users_1">External Users<a class="headerlink" href="#external-users_1" title="Permanent link"> ¶</a></h6>
<p>To create the ActivitySim CVM environment:</p>
<ul>
<li>Open Anaconda3 Prompt</li>
<li>Execute the following commands</li>
</ul>
<div class="highlight"><pre><span></span><code>mkdir workspace
cd workspace
git clone https://github.com/ActivitySim/sharrow.git
git clone https://github.com/SANDAG/activitysim-cvm
cd activitysim
git switch time-settings
cd ..
conda env create -p {path to Anaconda3}/envs/asim_sandag_cvm --file activitysim/conda-environments/activitysim-dev-base.yml
conda activate C:/Anaconda3/envs/asim_sandag_cvm
pip install -e ./sharrow
pip install -e ./activitysim
</code></pre></div>
<p>Note: For {path to anaconda3} point to wherever Anaconda3 is installed on your workstation</p>
<h3 id="environment-variables">Environment Variables<a class="headerlink" href="#environment-variables" title="Permanent link"> ¶</a></h3>
<p>During an ABM3 model run, there are certain system environment variables that get referenced. These variables must be added to your workstation&rsquo;s environment variables. To do so:</p>
<ul>
<li>Navigate to your workstation&rsquo;s <em>System Properties</em> &gt; <em>Advanced</em> &gt; <em>Environment Variables</em></li>
<li>Under <em>System variables</em>, using the <em>New&hellip;</em> button, add the following variables:<ul>
<li>CONDA_PREFIX={path to Anaconda3}<ul>
<li>e.g., C:\Anaconda3</li>
</ul>
</li>
<li>CONDA_TWO_PREFIX={path to Anaconda2}<ul>
<li>e.g., C:\Anaconda2</li>
</ul>
</li>
</ul>
</li>
<li>Under <em>System variables</em> &gt; <em>Path</em>, using the <em>Edit&hellip;</em> button, add (if not already present) the following variables to <em>Path</em>:<ul>
<li>{path to Anaconda2}</li>
<li>{path to Anaconda2}\Scripts</li>
<li>{path to Anaconda2}\Library\bin</li>
<li>{path to Anaconda3}</li>
<li>{path to Anaconda3}\Scripts</li>
<li>{path to Anaconda3}\Library\bin</li>
</ul>
</li>
</ul>
<h4 id="azure-environment-variables">Azure Environment Variables<a class="headerlink" href="#azure-environment-variables" title="Permanent link"> ¶</a></h4>
<p><em>Note: This section mainly relevant to SANDAG users.</em></p>
<p>When an ABM3 scenario finalizes, it loads onto Azure for post-processing. There are a number of system environment variables necessary to establish a connection to the Azure system. </p>
<p>To create those Azure system environment variables:</p>
<ul>
<li>Open PowerShell as Administrator</li>
<li>Navigate (via <em>cd</em> command) to <em>T:\ABM\software\PS1</em></li>
<li>Execute <em>.\ABM_Variables.ps1</em><ul>
<li>If you encounter an error message indicating the .ps1 file is not digitally signed, you may bypass the execution policy for your current PowerShell session by running: <code>Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass</code> Then, re-execute <em>ABM_Variables.ps1</em>.</li>
</ul>
</li>
</ul>
<h3 id="sqlcmd">SQLCMD<a class="headerlink" href="#sqlcmd" title="Permanent link"> ¶</a></h3>
<p><em>Note: This section mainly relevant to SANDAG users.</em></p>
<p>An installation of the <em>sqlcmd</em> utility is necessary to execute Transact-SQL statements directly in the command line. Within the ABM3 modeling framework, it is utilized to execute a command that identifies the next available Azure scenario ID in preparation for loading a finalized ABM3 scenario onto Azure. </p>
<p>To install the sqlcmd utility, download and execute the latest Microsoft Software Installer (i.e., .msi) file from the <a href="https://github.com/microsoft/go-sqlcmd/releases">Microsoft sqlcmd GitHub repository</a> (hint: <em>sqlcmd-amd64.msi</em>)</p>
<p>To verify successful installation of sqlcmd utility on your workstation:</p>
<ul>
<li>Copy <a href="https://github.com/SANDAG/ABM/blob/ABM3_develop/src/main/resources/GetScenarioId.bat">GetScenarioId.bat</a> somewhere onto your workstation</li>
<li>Open command prompt</li>
<li>Navigate (via <em>cd</em> command) to location where <em>GetScenarioId.bat</em> was copied to</li>
<li>Execute the following command:<ul>
<li><code>GetScenarioId.bat 9999 sqlcmdTest "dev"</code><ul>
<li><em>Note: The steps under Azure Environment Variables must be executed beforehand</em></li>
</ul>
</li>
</ul>
</li>
<li>If installation and command execution were successful, you should see the following:</li>
</ul>
<p><br></p>
<div align="center">
    <img src="images\running\sqlcmd_test.JPG" alt="alt_text" title="image_tooltip">
    <br>
    <em>SQLCMD Utility Test</em>
</div>

<h3 id="installing-java">Installing Java<a class="headerlink" href="#installing-java" title="Permanent link"> ¶</a></h3>
<p>Java version 1.8 needs to be installed on the workstation. SANDAG servers usually have this version of Java already installed on them. </p>
<p>Alternatively, the exact version may be found on Oracle&rsquo;s <a href="https://www.oracle.com/java/technologies/javase/javase8-archive-downloads.html">Java SE 8 Archive Downloads</a> site. (hint: <em>jre-8u162-windows-x64.exe</em>)</p>
<h2 id="creating-an-abm3-scenario">Creating an ABM3 Scenario<a class="headerlink" href="#creating-an-abm3-scenario" title="Permanent link"> ¶</a></h2>
<p><em>Note: This section mainly relevant to SANDAG users.</em></p>
<p>Follow the steps below to create an ABM3 scenario directory:</p>
<ul>
<li>Check for an available server using the <a href="http://vpdamwiis-01.sandag.org:5000/modeling">SANDAG Live Report: ABM Compute Servers</a> page</li>
<li>Log onto available server and ensure:<ol>
<li>Server&rsquo;s C Drive has at least 500 GB worth of space</li>
<li>You are logged onto the Bentley CONNECTION Client license manager software</li>
</ol>
</li>
<li>Using the server’s Windows Explorer, navigate to the latest approved ABM3 release. As of March 2025, this is <em>T:\ABM\release\ABM\version_15_2_2</em></li>
<li>Double click on <em>createStudyAndScenario.bat</em> and click Run.</li>
<li>On pop-up, fill out the fields under <em>Create an ABM scenario</em>.<ul>
<li><strong>EMME Version</strong>: As of March 2025, only available version is 4.3.7</li>
<li><strong>Year</strong>: Using drop-down menu, select scenario year you&rsquo;d like to run</li>
<li><strong>Base</strong>: Whether you would like to run a Build or No Build scenario. Note that the base 2022 year only has the option to run as Base.</li>
<li><strong>Geography ID</strong>: Leave as 1. As of March 2025, this field has no functionality. </li>
<li><strong>Scenario Folder</strong>: File path you would like to create scenario at. The tool will create the directory if it doesn&rsquo;t already exist. For cases where you point to an exisitng directory, the tool will notify users that location exists to avoid unintended overwriting.</li>
<li><strong>Network Folder</strong>: File path to input network. </li>
<li><strong>Land Use Folder</strong>: File path to input land use files.</li>
</ul>
</li>
<li>After fields are filled out, click <em>Create</em>.</li>
<li>A DOS window will open and all required files will be copied. If you have a server with a valid license, it will pause for about 30-45 seconds on <em>init EMME folder</em>. You will get a pop-up window that indicates you have successfully created the scenario. Click <em>Quit</em>. Then, you may exit the GUI by clicking on <em>Quit</em>.</li>
<li>Navigate to newly created scenario and ensure the correct input files were copied over.</li>
</ul>
<h2 id="running-abm3">Running ABM3<a class="headerlink" href="#running-abm3" title="Permanent link"> ¶</a></h2>
<p>To open the EMME application from the created scenario directory, users need to go to the <em>emme_project</em> folder, and double-click on the <em>start_emme_with_virtualenv.bat</em> file. This opens up the EMME application, where the application prompts the choice of a scenario. It is recommended to select the main highway scenario (Scen. 100) to start off the model run, although other scenarios may be selected as well. </p>
<p>Following this step, users should open the <em>EMME Modeler</em> by clicking on the gold square icon at the top left of the screen. 
<br></p>
<div align="center">
    <img src="images\running\1.jpg" alt="alt_text" title="image_tooltip">
    <br>
    <em>EMME Modeler icon</em>
</div>

<p><br>
The <em>EMME Modeler</em> opens to the <em>EMME Standard Toolbox</em>, but needs to be switched to the <em>SANDAG toolbox</em> by selecting it from the bottom-left of the screen. From this toolbox, open the <em>Master Run</em> tool by double-clicking it.</p>
<p><br></p>
<div align="center">
    <img src="images\running\2.jpg" alt="alt_text" title="image_tooltip">
    <br>
    <em>Opening SANDAG Toolbox and Master run</em>
</div>
<p><br></p>
<p>The <em>Master Run</em> tool allows the user to run all or part of the model, and set a number of settings such as sample size per iteration.</p>
<p><br></p>
<div align="center">
    <img src="images\running\master_run.JPG" alt="alt_text" title="image_tooltip">
    <br>
    <em>Master Run tool</em>
</div>
<p><br>
The <em>Master run</em> tool operates the SANDAG travel demand model. Users have the option to configure a number of settings prior to launching the model run:</p>
<ul>
<li><strong>Select main ABM directory</strong>: No changes necessary. The file path to the scenario. Defaults to the parent directory of opened EMME project.</li>
<li><strong>Scenario ID</strong>: No changes necessary. Scenario ID for the base imported network data. The result scenarios are indexed in the next five scenarios by time period. </li>
<li><strong>Scenario title</strong>: Title to use for the scenario. Standard practice is to input scenario title.</li>
<li><strong>Emmebank title</strong>: Title to use for the Emmebank (EMME database). Standard practice is to input scenario title.</li>
<li><strong>Number of processors</strong>: the number of processors to use for traffic and transit assignments and skims, aggregate demand models (where required) and other parallelized procedures in Emme. Default is <code>Max available – 1</code>.</li>
<li><strong>Datalake Environment</strong>: Datalake environment to which scenario outputs will be loaded onto: Prod (Production), or Dev (Development). This parameter mostly relevant to SANDAG users.</li>
<li><strong>Sampe rate by iteration</strong>: Three comma-separated values for the ActivitySim sample rates for each iteration.</li>
</ul>
<p>By expanding the <em>Run model – skip steps</em> drop down, the user has the option to skip certain steps of the model run. Usually, the defaults (see image below) should be sufficient. It should be noted that checkmarking a step means that it will be skipped.</p>
<p><br></p>
<div align="center">
    <img src="images\running\master_run_skip_steps.JPG" alt="alt_text" title="image_tooltip">
    <br>
    <em>Run model tool</em>
</div>
<p><br></p>
<p>On opening the <strong>Master run</strong> tool, the <code>conf/sandag_abm.properties</code> file is read and its values pre-set the <em>Run model - skip steps</em> inputs. When the <em>Run</em> button is clicked, this file is written out with the values specified. Any manual changes to the file in-between opening the tool and clicking the <em>Run</em> button are overwritten.</p>
<ul>
<li><strong>Start from iteration</strong>: Indicate from what iteration you would like model run to start.</li>
<li><strong><em>Skip steps</em></strong>: Optional checkboxes to skip model steps.</li>
<li><strong>Select link(s)</strong>: Add select link analyses for traffic.</li>
</ul>
<p>Following this setup, you can click <em>Run</em> to start the model run. It is recommended to occasionally check the model run status to make sure the run is going smoothly. When the model run finishes successfully, the <em>Master run</em> tool will show a model run successful message in green at the top of the tool window.</p>
<p>If the run is unsuccessful (there will be an error prompt from EMME), check the <em>EMME Logbook</em> and log files (under the <em>logFiles</em> or <em>output</em> directories) for clues to where it may have crashed.</p>
<p>As the model runs, a full runtime trace of the model steps, inputs and reports is recorded in the <em>Modeller Logbook</em>. As each step completes, it will record an entry in the Logbook along with reports and other results. The Logbook can be opened from the clock-like icon in the upper right of the <em>Modeller</em> window. This icon can also be found in the upper left toolbar in the <em>EMME Desktop</em>, or upper right in the <em>EMME Logbook</em>. If a <em>Modeller</em> tool is running, a window will pop-up over the <em>EMME Desktop</em> which includes a <em>Show Logbook</em> button (this window can be closed to use Desktop worksheets and tables while any tool is running). Click on the <em>Refresh</em> button to update the Logbook view with the latest status.</p>
<p><br></p>
<div align="center">
    <img src="images\running\modeller_logbook.jpg" alt="alt_text" title="image_tooltip">
    <br>
    <em>Modeller logbook</em>
</div>
<p><br></p>
<p>The Logbook provides a real-time, automated documentation of the model execution. The overall structure of the model is represented at the top level, with the occurrence, sequence and repetition of the steps involved in the model process. Nested Logbook entries may be collapsed or expanded to see detail. For the EMME assignment procedures, interactive charts are recorded. The statistical summaries of the impedance matrices are recorded for each time period following the assignment. These summary tables provide an easy way to check for skims with obvious outlier values.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.tabs", "navigation.indexes", "navigation.top", "navigation.expand", "content.code.annotate", "content.tabs.link"], "search": "assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="assets/javascripts/bundle.3220b9d7.min.js"></script>
      
        <script src="javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>