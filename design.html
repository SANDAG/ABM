
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://sandag.github.io/abm/design.html">
      
      
        <link rel="prev" href="index.html">
      
      
        <link rel="next" href="running.html">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.0">
    
    
      
        <title>Model Design - SANDAG ABM3</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.9f615399.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.649f08f9.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="deep-orange">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#model-design" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="SANDAG ABM3" class="md-header__button md-logo" aria-label="SANDAG ABM3" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SANDAG ABM3
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Model Design
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="grey"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/SANDAG/ABM" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="index.html" class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="design.html" class="md-tabs__link">
        
  
    
  
  Model Design

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="running.html" class="md-tabs__link">
        
  
    
  
  Installing and Running

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="inputsandoutputs.html" class="md-tabs__link">
        
  
    
  
  Model Inputs and Outputs

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="applying.html" class="md-tabs__link">
        
  
    
  
  Applying ABM3

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="cvm.html" class="md-tabs__link">
        
  
    
  
  Commercial Vehicle Model

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="SANDAG ABM3" class="md-nav__button md-logo" aria-label="SANDAG ABM3" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    SANDAG ABM3
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/SANDAG/ABM" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Model Design
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="design.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Model Design
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#resident-model" class="md-nav__link">
    Resident Model
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crossborder-model" class="md-nav__link">
    Crossborder Model
  </a>
  
    <nav class="md-nav" aria-label="Crossborder Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crossborder-model-purpose-definitions" class="md-nav__link">
    Crossborder Model Purpose Definitions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crossborder-model-mode-definitions" class="md-nav__link">
    Crossborder Model Mode Definitions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airport-ground-access-models" class="md-nav__link">
    Airport Ground Access Models
  </a>
  
    <nav class="md-nav" aria-label="Airport Ground Access Models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#airport-ground-access-model-trip-arrival-modes" class="md-nav__link">
    Airport Ground Access Model Trip Arrival Modes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overnight-visitor-model" class="md-nav__link">
    Overnight Visitor Model
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="running.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing and Running
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="inputsandoutputs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Inputs and Outputs
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="applying.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Applying ABM3
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="cvm.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Commercial Vehicle Model
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#resident-model" class="md-nav__link">
    Resident Model
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crossborder-model" class="md-nav__link">
    Crossborder Model
  </a>
  
    <nav class="md-nav" aria-label="Crossborder Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crossborder-model-purpose-definitions" class="md-nav__link">
    Crossborder Model Purpose Definitions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crossborder-model-mode-definitions" class="md-nav__link">
    Crossborder Model Mode Definitions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airport-ground-access-models" class="md-nav__link">
    Airport Ground Access Models
  </a>
  
    <nav class="md-nav" aria-label="Airport Ground Access Models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#airport-ground-access-model-trip-arrival-modes" class="md-nav__link">
    Airport Ground Access Model Trip Arrival Modes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overnight-visitor-model" class="md-nav__link">
    Overnight Visitor Model
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="model-design">Model Design<a class="headerlink" href="#model-design" title="Permanent link"> ¶</a></h1>
<p>The ABM3 model system is primarily based on the <a href="https://research.ampo.org/activitysim/">ActivitySim</a> platform; ActivitySim is used to model resident travel, cross-border travel, overnight visitor travel, airport ground access travel, and commercial vehicle travel including light, medium, and heavy commercial vehicles. Aggregate models are used to model external-internal travel (from external stations other than the U.S./Mexico border crossing) and through travel. The model system relies on <a href="https://www.bentley.com/software/emme/">EMME</a> software for network processing, skimming, and assignment. Models are mostly implemented in <a href="https://www.python.org/">Python</a>, and some models are implemented in [Java] (https://www.java.com/en/).</p>
<p>The overall design of the model is shown in the figure below.</p>
<p><img alt="" src="images/design/overall_model_design.png" /></p>
<p>The system starts by performing initial input processing in EMME. This includes building transport networks and scenarios for skimming and assignment. An initial set of skims are created based on input trip tables (e.g. warm start). Then disaggregate choice models in ActivitySIm are run, including the resident model, the crossborder travel model, two airport ground access models, the overnight visitor model, and the commercial vehicle model. Next auxiliary models are run; the taxi/TNC routing model and the autonomous vehicle intra-household allocation model are run in Java. Aggregate external-internal and through travel models are run in Python. After all models are run, trip tables are built from the result and assigned to transport networks. A check is made to determine whether the model has reached convergence (currently this is set to three feedback iterations). If convergence is reached, outputs are processed for export to the SANDAG Datalake for reporting summaries. If not, speeds from assignment are averaged using method of successive averages, and skims are rebuilt for the next iteration. The model system is then re-run with the updated skims.</p>
<p>ActivitySim is used to represent all internal travel and internal-external made by residents of the SANDAG region (modeled area).  The decision-makers in the model system include both persons and households. These decision-makers are created (synthesized) for each simulation year and land-use scenario, based on Census data and forecasted distributions of households and persons by key socio-economic categories. A similar but simplified method is used to generate disaggregate populations for cross-border, airport ground access, and overnight visitor models. The decision-makers are used in the subsequent discrete-choice models in a microsimulation framework where a single alternative is selected from a list of available alternatives according to a probability distribution.  The probability distribution is generated from a logit model which considers the attributes of the decision-maker and the attributes of the various alternatives. The application paradigm is referred to as Monte Carlo simulation, since a random number draw is used to select an alternative from the probability distribution. The decision-making unit is an important element of model estimation and implementation and is explicitly identified for each model specified in the following sections.</p>
<p>A key advantage of using the micro-simulation approach is that there are essentially no computational constraints on the number of explanatory variables that can be included in a model specification.  However, even with this flexibility, the model system will include some segmentation of decision-makers.  Segmentation is a useful tool to both structure models (for example, each person type segment could have their own model for certain choices) and to characterize person roles within a household.  Segments can be created for persons as well as households.</p>
<h2 id="resident-model">Resident Model<a class="headerlink" href="#resident-model" title="Permanent link"> ¶</a></h2>
<p>The resident model structure is based on the Coordinated Travel Regional Activity-based Modeling Platform (CT-RAMP). The figure below shows the resident model structure. In order to understand the flow chart, some definitions are required. These are described in more detail below.</p>
<ul>
<li>Tour: A sequence of trips that start and end at an anchor location. In ActivitySim, anchors are home or work.</li>
<li>Primary destination: The “main” activity of the tour; this activity determines the tour purpose. It also divides the tour into two &ldquo;legs&rdquo;; the sequence of trips from the anchor location to the primary destination is the outbound leg, and the sequence of trips from the primary destination back to the anchor location is the inbound or return leg.</li>
<li>Mandatory activity: Work or school</li>
<li>Non-mandatory activity: Any out of home activity that is not work or school, including maintenance activities such as shopping as well as discretionary activities such as out-of-home recreation and eating out.</li>
<li>Fully joint tour: A tour in which two or more household members travel together to all out-of-home activity locations and return home together. In other words, no household member is picked-up or dropped-off en route.</li>
<li>Intermediate stop: An out-of-home activity location on the tour other than the anchor location or the primary destination. Intermediate stops are made on the way from the anchor location to the primary destination (outbound) or on the way from the primary destination back to the anchor location (inbound).</li>
<li>Tour mode: The “main mode” or “preferred mode” of the tour. This is an abstract concept used categorize the tour with respect to accessibility and constrain the availability of modes for trips on the tour to ensure some consistency of modes used for each trip.</li>
</ul>
<p>The resident model design is shown below.</p>
<p><img alt="" src="images/design/resident_model_design.png" /></p>
<p>The first model in the sequence is disaggregate accessibilities. This is a recent addition to ActivitySim in which the tour destination choice model is run for a prototypical sample population covering key market segments and destination choice logsums from the model are written out for each tour in the population. These destination choice logsums are then merged with the actual synthetic population and used as accessibility variables in downstream models such as auto ownership, coordinated daily activity patterns, and tour frequency. are mandatory location choice; this model is run for all workers and students regardless of whether they attend work or school on the simulated day.</p>
<p>Next a set of long-term and mobility models are run. The first model in the sequence predicts whether an autonomous vehicle is owned by the household. This model conditions the next model, which predicts the number of autos owned. If an autonomous vehicle is owned, multiple cars are less likely. Next, the mandatory (work and school) location choice models are run. The work location choice models includes a model to predict whether the worker has a usual out-of-home work location or exclusively works from home. If the worker chooses to work from home, they will not generate a work tour. An external worker identification model determines whether each worker with an out-of-home workplace location works within the region or external to the region. If they work external to the region, the external station is identified. Any primary destination of any work tours generated by the worker will be the external station chosen by this model. A work location choice model predicts the internal work location of each internal worker, and a school location choice model predicts the school location of each student.</p>
<p>Next, a set of models predicts whether workers and students have subsidized transit fares and if so, the percent of transit fare that is subsidized, and whether each person in the household owns a transit pass. A vehicle type choice model then runs, which predicts the body type, fuel type, and age of each vehicle owned by the household; this model was extended to predict whether each vehicle is autonomous, conditioned by the autonomous vehicle ownership model.</p>
<p>Next, we predict whether each household has access to a vehicle transponder which can be used for managed lane use. We assume that all vehicles built after a certain year (configurable by the user) are equipped with transponders. Next we predict whether each worker has subsidized parking available at work. Finally we predict the telecommute frequency of each worker, which affects downstream models including the daily activity pattern model, the non-mandatory tour frequency model, and stop frequency models.</p>
<p>Next the daily and tour level models are run. The first daily model is the daily activity pattern model is run, which predicts the general activity pattern type for every household member. Then Mandatory tours are generated for workers and students, the tours are scheduled (their location is already predicted by the work/school location choice model), a vehicle availability model is run that predicts which household vehicle would be used for the tour, and the tour mode is chosen. After mandatory tours are generated, a school pickup/dropoff model forms half-tours where children are dropped off and/or picked up at school. The model assigns chaperones to drive or ride with children, groups children together into “bundles” for ride-sharing, and assigns the chaperone task to either a generated work tour or generates a new tour for the purpose of ridesharing. Fully joint tours – tours where two or more household members travel together for the entire tour - are generated at a household level, their composition is predicted (adults, children or both), the participants are determined, the vehicle availability model is run, and a tour mode is chosen. The primary destination of fully joint tours is predicted, the tours are scheduled, the vehicle availability model is run, and a tour mode is chosen. Next, non-mandatory tours are generated, their primary destination is chosen, they are scheduled, the vehicle availability model is run, and a tour mode is chosen for each. At-work subtours are tours that start and end at the workplace. These are generated, scheduled (with constraints that the start and end times must nest within the start and end time of the parent work tour), a primary destination is selected, the vehicle availability model is run, and a tour mode is chosen.</p>
<p>At this point, all tours are generated, scheduled, have a primary destination, and a selected tour mode. The next set of models fills in details about the tours - number of intermediate stops, location of each stop, the departure time of each stop, and the mode of each trip on the tour. Finally, the parking location of each auto trip to the central business district (CBD) is determined.
After the model is run, the output files listed above are created. The trip lists are then summarized into origin-destination matrices by time period and vehicle class or transit mode and assigned to the transport network.</p>
<h2 id="crossborder-model">Crossborder Model<a class="headerlink" href="#crossborder-model" title="Permanent link"> ¶</a></h2>
<p>The Cross-Border Travel Model predicts travel made by residents of Mexico within San Diego County. It predicts the border crossing point of entry as well as all trips made within the county. The model is limited to simulating travel made by Mexican residents who return to Mexico within the simulation day. Cross-border travel not captured by the Cross-Border Model includes:</p>
<ul>
<li>Residents of San Diego County who travel to/from Mexico. This travel is represented
by the resident travel model.</li>
<li>Residents of Mexico (including U.S. citizens) who travel into San Diego County and who
do not return to Mexico at the end of the day. This travel is represented in the overnight
visitor travel model.</li>
<li>Travel between points of entry through San Diego County to other U.S. destinations. This
travel is represented by the external-external travel model.</li>
<li>Commercial vehicle travel to/from points of entry. This travel is represented by the
commercial vehicle model.</li>
</ul>
<p>The overall design of the model is shown in the figure below.</p>
<p><img alt="" src="images/design/crossborder_model_design.png" /></p>
<h3 id="crossborder-model-purpose-definitions">Crossborder Model Purpose Definitions<a class="headerlink" href="#crossborder-model-purpose-definitions" title="Permanent link"> ¶</a></h3>
<p>There are five activity purposes in the cross-border travel demand model.
* Work: Any activity involving work for pay.
* School: Pre-k school, K-12, college/university, or trade school.
* Shop: Shopping at retail, wholesale, etc.
* Visit: Visiting friends or family
* Other: A broad category including eating out, medical appointments, recreational activities, etc.</p>
<p>Note that home activities are not listed, since we do not model activities south of the border.</p>
<h3 id="crossborder-model-mode-definitions">Crossborder Model Mode Definitions<a class="headerlink" href="#crossborder-model-mode-definitions" title="Permanent link"> ¶</a></h3>
<p>The model has the following mode types at the trip level:
* Drive-alone: Single occupant private vehicle
* Shared 2: A private vehicle with exactly two passengers
* Shared 3+: A private vehicle with three or more passengers
* Walk: Walk mode
* Bike: Bike mode
* Walk-transit: Walk access to transit. There are three sub-types of transit: Local only,
premium only, local + premium (which includes both local and premium services in the
transit path)
* Taxi: Door-to-door taxi trip
* Single-pay TNC: Door-to-door TNC trip with a single payer (e.g. UberX)
* Shared-pay TNC: Stop-to-stop TNC trip with potentially multiple payers (e.g. UberPool)</p>
<p>We also model tour mode, which is the mode used to cross the border. These modes include
drive-alone, shared 2, shared 3+ and walk. We assume that anyone crossing by bus or taxi is
similar to walk, since they do not have access to a personal vehicle for the rest of their travel in
San Diego County.</p>
<p>We also classify border crossings by lane type: general purpose, SENTRI, and Ready. We
assume that the use of these lanes is related to the border crossing party; we attribute each party with SENTRI or Ready availability. The proportion of total border crossing parties with access to SENTRI and Ready lanes are based on observed survey data, pooled across all stations. This data is used to simulate the availability of the lane to the travel party. Each lane crossing type is related to the wait time that the travel party experiences at each border crossing station by mode.</p>
<p>Below is a general description of the model structure.</p>
<ol>
<li>Tour Enumeration: A list of person-tours is created by first cross-multiplying the input total
person tours with the share of tours by pass type, then expanding tours by pass type to tours
by pass type and purpose.</li>
<li>Tour Level Models
2.1 Time-of-day Choice: Each person-tour is assigned an outbound and return half-hour
period.
2.2 Primary Destination and Station Choice: Each border crossing person-tour chooses a
primary destination MGRA and border crossing station.
2.3 Border Crossing Mode Choice: Each person-tour chooses a border crossing tour mode.</li>
<li>Wait Time Model
3.1. Wait time model: Calculate wait time based on demand at each POE from model 2.2
3.2. Convergence check: If max iterations reached (currently 3), goto Stop and Trip level
models, else goto Model 2.2</li>
<li>Stop and Trip Level Models
4.1 Stop Frequency Choice: Each person-tour is assigned number of stops by half-tour
(outbound, return).
4.2 Stop Purpose Choice: Each stop is assigned a stop purpose (consistent with the tour
purposes).
4.3 Trip Departure Choice: Each trip is assigned a half-hourly time period.
4.4 Stop Location Choice: Each stop chooses an MGRA location.
4.5 Trip Mode Choice: Each trip is assigned a trip mode.
4.6 Trip Assignments: Trips are assigned to networks, along with resident and other special
market trip tables, and skims are created for the next iteration of the model.</li>
</ol>
<p>For more information on the Crossborder Travel Model see technical documentation.</p>
<h2 id="airport-ground-access-models">Airport Ground Access Models<a class="headerlink" href="#airport-ground-access-models" title="Permanent link"> ¶</a></h2>
<p>There are two airport ground access models - one for San Diego International Airport and one for the Crossborder Express terminal which provides access to Tijuana International Airport from the United States. Both models use the same structure and software code, though the parameters that control the total number of airport travel parties, off-airport destination, mode, arrival and departure times, and other characteristics, vary for each airport according to survey and airport-specific data.
The airport ground access model simulates trips to and from the airport for residents, visitors, and external travelers. These trips are generated by arriving or departing passengers and are modeled as tours within the ActivitySim framework. A post processing script also generates trips to serve passengers who require a pickup or dropoff at the airport. For example, a passenger who is picked up at the airport generates two trips; one trip to the airport by the driver to pick up the air passenger(s), and another trip from the airport with the driver and the air passenger(s).
It is important to note that, to work within the ActivitySim framework, the airport trips must be modeled as tours, rather than being generated directly as in the previous model. These tours are assigned an origin at the airport MGRA. During the stop frequency step of ActivitySim, a trip is assigned to the appropriate leg of the tour (either to or from the airport) while the opposite leg is not assigned any trips (referred to as the ‘dummy leg’). Passengers who are leaving on a departing flight and traveling to the airport are considered &ldquo;inbound,&rdquo; while arriving passengers are considered &ldquo;outbound&rdquo;.</p>
<p>The overall design of the model is shown in the figure below.</p>
<p><img alt="" src="images/design/airport_model_design.png" /></p>
<ol>
<li>Tour Enumeration: A list of airport travel parties is generated from input enplanements and transferring passenger rates, as well as distributions that describe the share of travel parties by purpose (business versus personal), household income, and party size.</li>
<li>Tour Level Models
2.1 Tour Scheduling Probabilistic: The tour scheduling model uses a probabilistic draw of the scheduling distribution. This model assigns start and end times to the tour. This is important because it will also serve as the schedule model for the final airport trips. In ActivitySim, trips are scheduled based on the tour schedule. If there is only one trip per leg on the tour (such as our case here) the trip is assigned the tour start/end time.
2.2 Tour Destination Choice: The destination choice model chooses the non-airport end of the airport trips. Each tour is set with an origin at the airport MGRA. The tour destination model of ActivitySim is used to choose the non-airport end of the trip. The utility equation includes the travel distance, and the destination size terms. ActivitySim destination choice framework requires a mode choice log sum. A dummy tour mode choice log sum was created which generates a value of zero for every destination using the ‘tour_mode_choice.csv’ and ‘tour_mode_choice.yml’ file. This is a work around to prevent ActivitySim from crashing and not having to include the tour mode choice log sum in the destination choice model.
2.3 Stop Frequency Choice: The stop frequency model is where the trip table is first created. The pre-processor tags each tour with a direction of ‘inbound’ or ‘outbound’ according to whether the tour is a departing or arriving passenger. For the Airport Ground Access model, inbound tours are tagged with zero outbound trips and -1 inbound trips (and the opposite is true for outbound tours: -1 outbound trips and 0 inbound trips). The 0 signifies that no intermediate stops are made; this leg of the tour will only have one trip. The -1 signifies that no trip is made at all on that leg. Using the -1 allows us to create ‘half-tours’ where only one leg of the tour is recorded as a trip.</li>
<li>Trip Level Models
3.1 Trip Departure Choice: The trip scheduling model assigns depart times for each trip on a tour. ActivitySim requires trip scheduling probabilities; however, these are not used in this implementation since there is only one trip on any given tour leg. This means the trips will be assigned the tour scheduling times which were determined in the tour scheduling model. The trip scheduling probabilities file is just a dummy file.
3.2 Trip Mode Choice: Each trip is assigned a trip mode; in the Airport Ground Access Model, trip mode refers to the airport arrival mode which simultaneously predicts the arrival mode and the location which the passenger uses to access that model. The arrival modes are shown in the table below.  The trip mode choice yaml file contains detailed variables associated with each trip mode. For example, each parking location is given an MGRA location, a walk time, a wait-time, and a cost. If a parking location MGRA is set to -999 it is assumed to be unavailable and will not be in the choice set. The pre-processor in this step stores all values of skims from the trip origin to each of the access modes destinations along with any associated costs. Costs include parking fees per day, access fees, fares, and rental car charges.
Employees are not fed into the trip mode choice model. Instead, if a transit share is specified in the employee park file, that percentage of employees will be assigned ‘Walk Premium’ mode in the pre-processor. Otherwise, employees are all assigned ‘Walk’ mode from the employee parking lot to the terminal.
3.3 Airport Returns: Airport trips where the party is dropped of curbside or parked and escorted are assumed to also have the driver make a return trip to the non-airport location. This procedure is done as a post-processing step after mode choice and before trip tables are written out. An ‘airport_returns.yml’ file takes a user setting to determine which trip modes will include a return trip. These trips records are flagged and duplicated. The duplicated trips swap the origin and destination of the original trip and are assigned a unique trip id. These trips are tagged with ‘trip_num =2’ so they are easily sorted in any additional processing (such as for writing trip matrices).
3.4 Write trip matrices: The write trip matrices step converts the trip lists into vehicle trip matrices. The matrices are segmented by trip mode and value of time bins. The vehicle trip modes in the matrices include SOV, HOV2, HOV3+, Taxi, and TNC-single. Value of time segmentation is either low, medium, or high bins based on the thresholds set in the model settings.</li>
</ol>
<h4 id="airport-ground-access-model-trip-arrival-modes">Airport Ground Access Model Trip Arrival Modes<a class="headerlink" href="#airport-ground-access-model-trip-arrival-modes" title="Permanent link"> ¶</a></h4>
<table>
<thead>
<tr>
<th><strong>Arrival Mode</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Park Location 1</td>
<td>Party parks personal vehicle at parking location 1.</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>Park Location 2</td>
<td>Party parks personal vehicle at parking location 2.</td>
</tr>
<tr>
<td>Park Location 3</td>
<td>Party parks personal vehicle at parking location 3.</td>
</tr>
<tr>
<td>Park Location 4</td>
<td>Party parks personal vehicle at parking location 4.</td>
</tr>
<tr>
<td>Park Location 5</td>
<td>Party parks personal vehicle at parking location 5.</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>Curb Location 1</td>
<td>Party is dropped off or picked up by another driver at curbside location 1.</td>
</tr>
<tr>
<td>Curb Location 2</td>
<td>Party is dropped off or picked up by another driver at curbside location 2.</td>
</tr>
<tr>
<td>Curb Location 3</td>
<td>Party is dropped off or picked up by another driver at curbside location 3.</td>
</tr>
<tr>
<td>Curb Location 4</td>
<td>Party is dropped off or picked up by another driver at curbside location 4.</td>
</tr>
<tr>
<td>Curb Location 5</td>
<td>Party is dropped off or picked up by another driver at curbside location 5</td>
</tr>
<tr>
<td>Park and Escort</td>
<td>Party is driven in personal vehicle, parks on-site at the airport and is escorted to/from airport.</td>
</tr>
<tr>
<td>Rental Car</td>
<td>Party arrives/departs by rental car.</td>
</tr>
<tr>
<td>Shuttle Van</td>
<td>Party takes shuttle van.</td>
</tr>
<tr>
<td>Hotel Courtesy</td>
<td>Party takes hotel courtesy transportation.</td>
</tr>
<tr>
<td>Ridehail Location 1</td>
<td>Party arrives\departs using ridehail at ridehail location 1</td>
</tr>
<tr>
<td>Ridehail Location 2</td>
<td>Party arrives\departs using ridehail at ridehail location 2</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>Taxi Location 1</td>
<td>Party arrives\departs using taxi at taxi location 1</td>
</tr>
<tr>
<td>Taxi Location 2</td>
<td>Party arrives\departs using taxi at taxi location 2</td>
</tr>
<tr>
<td>Walk Local</td>
<td>Party arrives\departs using walk-local bus</td>
</tr>
<tr>
<td>Walk Premium</td>
<td>Party arrives\departs using walk-premium transit</td>
</tr>
<tr>
<td>Walk Mix</td>
<td>Party arrives\departs using walk-local plus premium transit</td>
</tr>
<tr>
<td>KNR Local</td>
<td>Party arrives\departs using KNR-local bus</td>
</tr>
<tr>
<td>KNR Premium</td>
<td>Party arrives\departs using KNR-premium transit</td>
</tr>
<tr>
<td>KNR Mix</td>
<td>Party arrives\departs using KNR-local plus premium transit</td>
</tr>
<tr>
<td>TNC Local</td>
<td>Party arrives\departs using TNC-local bus</td>
</tr>
<tr>
<td>TNC Premium</td>
<td>Party arrives\departs using TNC-premium transit</td>
</tr>
<tr>
<td>TNC Mix</td>
<td>Party arrives\departs using TNC-local plus premium transit</td>
</tr>
<tr>
<td>Walk</td>
<td>Party arrives\departs using walk</td>
</tr>
</tbody>
</table>
<p>For more information on the Air Ground Access Travel Model see technical documentation.</p>
<h2 id="overnight-visitor-model">Overnight Visitor Model<a class="headerlink" href="#overnight-visitor-model" title="Permanent link"> ¶</a></h2>
<p>The Overnight Visitor Model simulates trips of visitors staying overnight in hotels, motels, short-term vacation rentals, and with friends and family. The trips are modeled as part of tours that begin and end at the place of lodging. However, unlike the resident model, the Overnight Visitor Model does not utilize a 24-hour activity schedule. Therefore it can be thought of as a simpler, tour-based model. Once each tour is generated, it is scheduled independently. The model uses the same time periods and modes as the resident model.
The overall design of the model is shown in the figure below.</p>
<p><img alt="" src="images/design/visitor_model_design.png" /></p>
<ol>
<li>
<p>Tour Enumeration: A list of visitor parties is generated from the input household data and hotel room inventory at the MGRA level. Visitor travel parties by segment (business versus personal) are calculated based on separate rates for hotels and for households. Visitor parties are generated by purpose based on tour rates by segment, then attributed with household income and party size based on input distributions. There are three purposes in the Overnight Visitor model:</p>
</li>
<li>
<p>Work:  Business travel made by business visitors.</p>
</li>
<li>Dining: Travel to food establishments for both business and personal visitors.</li>
<li>
<p>Recreational: All other non-work non-food related activities.</p>
</li>
<li>
<p>Tour Level Models
2.1 Tour Scheduling Probabilistic: The tour scheduling model uses a probabilistic draw of the scheduling distribution. This model assigns start and end times to the tour. If there is only one trip per leg on the tour, the trip is assigned the tour start/end time.
2.2 Tour Destination Choice: The destination choice model chooses the MGRA of the primary activity location on the tour.
2.3 Tour Mode Choice: The tour mode choice model determines the primary mode of the tour.
3 Stop Level Models
3.1 Stop Frequency Choice: The stop frequency model predicts the number of stops by direction based on input distributions that vary by tour purpose.
3.2 Stop Purpose: The stop purpose model chooses the activity purpose of each intermediate stop based on input distributions that vary according to tour purpose.
3.3 Stop Location Choice: The location choice model chooses the MGRA for each intermediate stop on the tour.</p>
</li>
<li>Trip Level Models
4.1 Trip Departure Choice: The trip scheduling model assigns depart times for each trip on a tour based on input distributions that vary by direction (inbound versus outbound), stop number, and number of periods remaining on the tour.
4.2 Trip Mode Choice: Each trip is assigned a trip mode, consistent with the modes in the resident model.
4.3 Trip Assignment: Trips are aggregated by time of day, mode occupancy, value-of-time, and origin-destination TAZ and assigned simultaneously with other trips.</li>
</ol>
<p>For more information on the Overnight Visitor Travel Model see technical documentation.</p>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.tabs", "content.code.annotate", "content.tabs.link", "navigation.indexes", "navigation.top"], "search": "assets/javascripts/workers/search.a264c092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="assets/javascripts/bundle.4e0fa4ba.min.js"></script>
      
    
  </body>
</html>