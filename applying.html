
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://sandag.github.io/abm/applying.html">
      
      
        <link rel="prev" href="outputs.html">
      
      
        <link rel="next" href="cvm.html">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.0">
    
    
      
        <title>Applying ABM3 - SANDAG ABM3</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.9f615399.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.649f08f9.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="deep-orange">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#applying-the-model" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="SANDAG ABM3" class="md-header__button md-logo" aria-label="SANDAG ABM3" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SANDAG ABM3
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Applying ABM3
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="grey"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/SANDAG/ABM" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="index.html" class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="design.html" class="md-tabs__link">
        
  
    
  
  Model Design

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="running.html" class="md-tabs__link">
        
  
    
  
  Installing and Running

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="inputs.html" class="md-tabs__link">
          
  
    
  
  Model Inputs and Outputs

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="applying.html" class="md-tabs__link">
        
  
    
  
  Applying ABM3

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="cvm.html" class="md-tabs__link">
        
  
    
  
  Commercial Vehicle Model

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="release-notes.html" class="md-tabs__link">
          
  
    
  
  About

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="SANDAG ABM3" class="md-nav__button md-logo" aria-label="SANDAG ABM3" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    SANDAG ABM3
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/SANDAG/ABM" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="design.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model Design
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="running.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing and Running
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Model Inputs and Outputs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Model Inputs and Outputs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="inputs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inputs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="outputs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Outputs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Applying ABM3
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="applying.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Applying ABM3
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#network-coding" class="md-nav__link">
    Network Coding
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#population-synthesis" class="md-nav__link">
    Population Synthesis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#land-use-data-preparation" class="md-nav__link">
    Land-Use Data Preparation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#micromobility" class="md-nav__link">
    Micromobility
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scenario-manager" class="md-nav__link">
    Scenario manager
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#electric-vehicle-rebates" class="md-nav__link">
    Electric Vehicle Rebates
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flexible-fleets" class="md-nav__link">
    Flexible Fleets
  </a>
  
    <nav class="md-nav" aria-label="Flexible Fleets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#incorporation-into-abm3" class="md-nav__link">
    Incorporation into ABM3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-attributes" class="md-nav__link">
    New Attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#travel-time-calculation" class="md-nav__link">
    Travel Time Calculation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="cvm.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Commercial Vehicle Model
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="release-notes.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="faq.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#network-coding" class="md-nav__link">
    Network Coding
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#population-synthesis" class="md-nav__link">
    Population Synthesis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#land-use-data-preparation" class="md-nav__link">
    Land-Use Data Preparation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#micromobility" class="md-nav__link">
    Micromobility
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scenario-manager" class="md-nav__link">
    Scenario manager
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#electric-vehicle-rebates" class="md-nav__link">
    Electric Vehicle Rebates
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flexible-fleets" class="md-nav__link">
    Flexible Fleets
  </a>
  
    <nav class="md-nav" aria-label="Flexible Fleets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#incorporation-into-abm3" class="md-nav__link">
    Incorporation into ABM3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-attributes" class="md-nav__link">
    New Attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#travel-time-calculation" class="md-nav__link">
    Travel Time Calculation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="applying-the-model">Applying the model<a class="headerlink" href="#applying-the-model" title="Permanent link"> ¶</a></h1>
<p>This page contains information needed to apply the model.</p>
<h2 id="network-coding">Network Coding<a class="headerlink" href="#network-coding" title="Permanent link"> ¶</a></h2>
<p>//TODO: Describe network attributes, how to code network</p>
<h2 id="population-synthesis">Population Synthesis<a class="headerlink" href="#population-synthesis" title="Permanent link"> ¶</a></h2>
<p>//TODO: Describe population synthesis procedure, how to modify inputs and construct new future-year synthetic population</p>
<h2 id="land-use-data-preparation">Land-Use Data Preparation<a class="headerlink" href="#land-use-data-preparation" title="Permanent link"> ¶</a></h2>
<p>//TODO: Describe how to prepare land-use data.</p>
<p>Describe how to update parking costs, enrollment data.</p>
<h2 id="micromobility">Micromobility<a class="headerlink" href="#micromobility" title="Permanent link"> ¶</a></h2>
<p>//TODO: Describe how to run micromobility policy tests</p>
<h2 id="scenario-manager">Scenario manager<a class="headerlink" href="#scenario-manager" title="Permanent link"> ¶</a></h2>
<p>ABM3 uses a python module as the scenario manager. The job of this scenario manager is updating the parameters used throughout the model to match a specific scenario’s definition and needs. A number of these parameters including auto operating cost, taxi and TNC fare, micromobility cost, and AV ownership penetration are usually assumed to change by forecast year or scenario.</p>
<p>Manually changing these parameters requires the model user to know where each parameter is located, and individually changing them according to the scenario forecast values. A scenario manager, therefore, can be a convenient and efficient tool to automate this process.</p>
<p>The ABM3 Scenario Manager reads in a CSV input file (located under <code>input/parametersByYears.csv</code>) containing the parameter values for each scenario, and updates the associated parameters in the ActivitySim config files. A snapshot of this input parameter CSV file is shown below, where each row is associated with a specific scenario year/name. The parameter names used here can either be identical to the parameter names used in ActivitySim, or different. In case the parameter names are different, a separate file is used to map the parameters names between the input CSV and ActivitySim config files.</p>
<table>
<thead>
<tr>
<th>Scenario Year</th>
<th>AOC fuel</th>
<th>AOC maintenance</th>
<th>Taxi baseFare</th>
<th>Taxi costPerMile</th>
<th>Taxi costPerMinute</th>
</tr>
</thead>
<tbody>
<tr>
<td>2012</td>
<td>13.5</td>
<td>6.3</td>
<td>1.78</td>
<td>1.87</td>
<td>0.08</td>
</tr>
<tr>
<td>2014</td>
<td>12.9</td>
<td>6.3</td>
<td>1.78</td>
<td>1.87</td>
<td>0.08</td>
</tr>
<tr>
<td>2015</td>
<td>19.5</td>
<td>6.2</td>
<td>1.78</td>
<td>1.87</td>
<td>0.08</td>
</tr>
<tr>
<td>2016</td>
<td>10.7</td>
<td>5.6</td>
<td>1.78</td>
<td>1.87</td>
<td>0.08</td>
</tr>
<tr>
<td>2017</td>
<td>10.8</td>
<td>5.5</td>
<td>1.78</td>
<td>1.87</td>
<td>0.08</td>
</tr>
</tbody>
</table>
<p>The scenario manager is run as part of the model setup in the Master Run tool before any ActivitySim model is run (usually only in the first iteration of the run). Model user can choose to run or skip this step, although it is highly recommended to run with each run to ensure correct parameters.</p>
<h2 id="electric-vehicle-rebates">Electric Vehicle Rebates<a class="headerlink" href="#electric-vehicle-rebates" title="Permanent link"> ¶</a></h2>
<p>One of the policies that SANDAG planners would like to test for the 2025 Regional Plan is providing rebates for low- and middle-income households to purchase electric vehicles. One of the variables in the vehicle type choice model is the <a href="https://github.com/SANDAG/ABM/blob/ABM3_develop/src/asim/configs/resident/vehicle_type_choice_op4.csv#L12-L17">new purchase price</a> for a vehicle of a given age, body type, and fuel type. The way the EV rebate is implemented in ABM3 is by deducting the appropriate rebate value for plugin and battery vehicles if a household meets the criteria (based on percentage of the federal poverty level). To configure the rebate values and poverty level thresholds, <a href="https://github.com/SANDAG/ABM/blob/ABM3_develop/src/asim/configs/common/constants.yaml#L290">new constants</a> were added to the common/constants.yaml configuration file. The constants fit into the policy as follows:</p>
<table>
<thead>
<tr>
<th>Fuel Type</th>
<th><code>LowIncomeEVRebateCutoff</code> &lt; Household Poverty Level &lt;= <code>MedIncomeEVRebateCutoff</code></th>
<th>Household Poverty Level &lt;= <code>LowIncomeEVRebateCutoff</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>BEV</td>
<td><code>MedIncomeBEVRebate</code></td>
<td><code>LowIncomeBEVRebate</code></td>
</tr>
<tr>
<td>PEV</td>
<td><code>MedIncomePEVRebate</code></td>
<td><code>LowIncomePEVRebate</code></td>
</tr>
</tbody>
</table>
<p>For example, if the following policy were to be tested&hellip;
| Fuel Type | 300-400% Federal Poverty Limit | 300% Federal Poverty Limit or lower |
| --------- | ------------------------------ | ----------------------------------- |
| BEV       | $2,000                         | $6,750                              |
| PEV       | $1,000                         | $3,375                              |</p>
<p>&hellip;then the constants would need to be set as follows:
<div class="highlight"><pre><span></span><code>LowIncomeEVRebateCutoff: 3
MedIncomeEVRebateCutoff: 4
LowIncomeBEVRebate: 6750
LowIncomePEVRebate: 3375
MedIncomeBEVRebate: 2000
MedIncomePEVRebate: 1000
</code></pre></div></p>
<h2 id="flexible-fleets">Flexible Fleets<a class="headerlink" href="#flexible-fleets" title="Permanent link"> ¶</a></h2>
<p>The of the five big moves defined in SANDAG&rsquo;s 2021 regional plan was <a href="https://www.sandag.org/projects-and-programs/innovative-mobility/flexible-fleets">Flexible Fleets</a>, which involves on-demand transit services. The <a href="https://www.sandag.org/-/media/SANDAG/Documents/PDF/regional-plan/2025-regional-plan/2025-rp-draft-initial-concept-2024-1-25.pdf">initial concept</a> of the 2025 Regional Plan involves rapidly expanding these services, with many new services planned to be in operation by 2035. For this reason, it is important that these services be modeled by ABM3. There are two flavors of flexible fleets that were incorporated into ABM3, Neighborhood Electric Vehicles (NEV) and microtransit. A table contrasting these services is shown below.</p>
<table>
<thead>
<tr>
<th>Characteristic</th>
<th>NEV</th>
<th>Microtransit</th>
</tr>
</thead>
<tbody>
<tr>
<td>Vehicle Size</td>
<td>Smaller</td>
<td>Larger</td>
</tr>
<tr>
<td>Service Area</td>
<td>Smaller</td>
<td>Larger</td>
</tr>
<tr>
<td>Operating Speed</td>
<td>Slower</td>
<td>Faster</td>
</tr>
</tbody>
</table>
<h3 id="incorporation-into-abm3">Incorporation into ABM3<a class="headerlink" href="#incorporation-into-abm3" title="Permanent link"> ¶</a></h3>
<p>Rather than creating new modes for flexible fleet services, microtransit and NEV were incorporated into existing modes. How this was done was dependent on whether the trip was a full flexible fleet trip, first-mile access to fixed-route transit<em>, or last-mile egress from fixed-route transit</em>. A table explaining how each of these trip types was incorporated into ABM3 is shown below. Further, a heirarchy of services is enforced. ActivitySim first checks if NEV is available (based on a new land use attribute), and if it is, it&rsquo;s assumed that NEV is used. If not, ActivitySim checks if microtransit is available (based on a corresponding land use attribute), and if it is, it&rsquo;s assumed that microtransit is used. If neither are available, ActivitySim looks at the other services that are already available.</p>
<p>*<em>For trips on the return leg of a tour the access and egress attributes are swapped</em>
|                                                               | Full microtransit trip                              | First-mile access to fixed-route transit                                                    | Last-mile egress from fixed-route transit                                                                                                                                                                    |
| ------------------------------------------------------------- | --------------------------------------------------- | ------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| What models allow for this type of trip?                      | Resident, Visitor, Crossborder                      | Resident                                                                                    | Resident, Visitor, Crossborder                                                                                                                                                                               |
| Which mode is used?                                           | TNC Shared                                          | TNC to transit                                                                              | All transit modes                                                                                                                                                                                            |
| How is the flexible fleet travel time factored into the trip? | The travel time is the full travel time of the trip | The travel time is added to the transit access time and a transfer is added                 | The travel time is added to the transit egress time and a transfer is added if the destination is further from the nearest transit stop than a user would be willing to walk (that distance is configurable) |
| How is the flexible fleet cost factored into the trip?        | The cost is the full cost of the trip               | It is assumed that flexible fleet services are free when used to access fixed-route transit | It is assumed that flexible fleet services are free when egressing from fixed-route transit                                                                                                                  |</p>
<h3 id="new-attributes">New Attributes<a class="headerlink" href="#new-attributes" title="Permanent link"> ¶</a></h3>
<p>Several new attributes were added to allow the user to configure how flexible fleet services are operated. These are all defined in the common <a href="https://github.com/SANDAG/ABM/blob/ABM3_develop/src/asim/configs/common/constants.yaml#L255-L273">constants.yaml</a> file. Each attribute is defined as follow:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Definition</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Speed</td>
<td>Assumed operating speed in miles per hour</td>
<td>MT: 30, NEV: 17</td>
</tr>
<tr>
<td>Cost</td>
<td>Cost of using service in US Cents</td>
<td>125 for both</td>
</tr>
<tr>
<td>WaitTime</td>
<td>Assumed time passengers wait to wait to use service in minutes</td>
<td>12 for both</td>
</tr>
<tr>
<td>MaxDist</td>
<td>Maximum distance in miles that the service can be used</td>
<td>MT: 4.5, NEV: 3</td>
</tr>
<tr>
<td>DiversionConstant</td>
<td>Additional travel time to divert for servicing other passengers</td>
<td>6 for both</td>
</tr>
<tr>
<td>DiversionFactor</td>
<td>Time multiplier accounting for diversion to service other passengers</td>
<td>1.25 for both</td>
</tr>
<tr>
<td>StartPeriod</td>
<td>Time period to start service (not yet implemented)</td>
<td>9 for both</td>
</tr>
<tr>
<td>EndPeriod</td>
<td>Time period to end service (not yet implemented)</td>
<td>MT: 32, NEV: 38</td>
</tr>
<tr>
<td>maxWalkIfMTAccessAvailable</td>
<td>Maximum disatance someone is willing to walk at the destination end if flexible fleet services are available (same for microtransit and NEV)</td>
<td>0.5</td>
</tr>
</tbody>
</table>
<h3 id="travel-time-calculation">Travel Time Calculation<a class="headerlink" href="#travel-time-calculation" title="Permanent link"> ¶</a></h3>
<h4 id="direct-time">Direct Time<a class="headerlink" href="#direct-time" title="Permanent link"> ¶</a></h4>
<p>The flexible fleet travel time calculation is a two-step process. The first step is to calculate the time that it would take to travel from the origin to the destination* directly without any diversion to pick up or drop off any passengers. This is done by taking the maximum of the time implied by the operating speed and the congested travel time:</p>
<p>$t_{\textnormal{direct}} = \textnormal{max}(60\times\frac{s}{d}, t_{\textnormal{congested}})$</p>
<p>where:</p>
<p>$t_{\textnormal{direct}} = \textnormal{Direct flexible fleet travel time}$\
$s = \textnormal{speed}$\
$d = \textnormal{Distance from origin to destination (taken from distance skim)}$\
$t_{\textnormal{congested}} = \textnormal{Congested travel time from origin to destination (taken from Shared Ride 3 time skim)}$</p>
<p>*<em>When used to access fixed-route transit, the destination is the nearest transit stop to the trip origin. When used to egress from fixed-route transit, the origin is the nearest transit stop to the trip destination.</em></p>
<h4 id="total-time">Total Time<a class="headerlink" href="#total-time" title="Permanent link"> ¶</a></h4>
<p>The second step of the travel time calculation was to account for diversion to pick up other passengers. These were based on guidelines used in a NEV pilot. The formula to calculated the total flexible fleet travel time is as follows:</p>
<p>$t_{\textnormal{total}} = \textnormal{max}(t_{\textnormal{direct}}+c, \alpha\times t_{\textnormal{direct}})$</p>
<p>where:</p>
<p>$t_{\textnormal{total}} = \textnormal{Total flexible fleet travel time}$\
$c = \textnormal{DiversionConstant}$\
$\alpha = \textnormal{DiversionFactor}$</p>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.tabs", "content.code.annotate", "content.tabs.link", "navigation.indexes", "navigation.top"], "search": "assets/javascripts/workers/search.a264c092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="assets/javascripts/bundle.4e0fa4ba.min.js"></script>
      
    
  </body>
</html>